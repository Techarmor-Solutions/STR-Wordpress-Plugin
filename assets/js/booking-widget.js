(()=>{var e={926(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,s,a=[],_n=!0,o=!1;try{for(n=n.call(e);!(_n=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);_n=!0);}catch(e){o=!0,s=e}finally{try{_n||null==n.return||n.return()}finally{if(o)throw s}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u,d,p,m,h={exports:{}};h.exports=function(){if(m)return p;m=1;var e=d?u:(d=1,u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,p=function(){function r(t,n,r,s,a,o){if(o!==e){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function s(){return r}r.isRequired=r;var a={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a}}()();var f=l(h.exports),y=function(e,n,r){var s=!!r,a=t.useRef(r);t.useEffect(function(){a.current=r},[r]),t.useEffect(function(){if(!s||!e)return function(){};var t=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,t),function(){e.off(n,t)}},[s,n,e,a])},g=function(e){var n=t.useRef(e);return t.useEffect(function(){n.current=e},[e]),n.current},v=function(e){return null!==e&&"object"===s(e)},x="[object Object]",b=function e(t,n){if(!v(t)||!v(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var s=Object.prototype.toString.call(t)===x;if(s!==(Object.prototype.toString.call(n)===x))return!1;if(!s&&!r)return t===n;var a=Object.keys(t),o=Object.keys(n);if(a.length!==o.length)return!1;for(var i={},c=0;c<a.length;c+=1)i[a[c]]=!0;for(var l=0;l<o.length;l+=1)i[o[l]]=!0;var u=Object.keys(i);if(u.length!==a.length)return!1;var d=t,p=n;return u.every(function(t){return e(d[t],p[t])})},j=function(e,t,n){return v(e)?Object.keys(e).reduce(function(s,o){var i=!v(t)||!b(e[o],t[o]);return n.includes(o)?(i&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),s):i?r(r({},s||{}),{},a({},o,e[o])):s},null):null},S="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",k=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;if(null===e||v(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(n)},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;if(function(e){return v(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return k(e,t)})};var n=k(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},_=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.10.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.10.0",url:"https://stripe.com/docs/stripe-js/react"}))},C=t.createContext(null);C.displayName="ElementsContext";var w=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},N=function(e){var n=e.stripe,r=e.options,s=e.children,a=t.useMemo(function(){return E(n)},[n]),o=i(t.useState(function(){return{stripe:"sync"===a.tag?a.stripe:null,elements:"sync"===a.tag?a.stripe.elements(r):null}}),2),c=o[0],l=o[1];t.useEffect(function(){var e=!0,t=function(e){l(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==a.tag||c.stripe?"sync"!==a.tag||c.stripe||t(a.stripe):a.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[a,c,r]);var u=g(n);t.useEffect(function(){null!==u&&u!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,n]);var d=g(r);return t.useEffect(function(){if(c.elements){var e=j(r,d,["clientSecret","fonts"]);e&&c.elements.update(e)}},[r,d,c.elements]),t.useEffect(function(){_(c.stripe)},[c.stripe]),t.createElement(C.Provider,{value:c},s)};N.propTypes={stripe:f.any,options:f.object};var P=function(e){var n=t.useContext(C);return w(n,e)},O=function(e){return(0,e.children)(P("mounts <ElementsConsumer>"))};O.propTypes={children:f.func.isRequired};var T=["on","session"],I=t.createContext(null);I.displayName="CheckoutSdkContext";var A=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},D=t.createContext(null);D.displayName="CheckoutContext";var M=function(e){var n=e.stripe,r=e.options,s=e.children,a=t.useMemo(function(){return E(n,"Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[n]),c=i(t.useState(null),2),l=c[0],u=c[1],d=i(t.useState(function(){return{stripe:"sync"===a.tag?a.stripe:null,checkoutSdk:null}}),2),p=d[0],m=d[1],h=function(e,t){m(function(n){return n.stripe&&n.checkoutSdk?n:{stripe:e,checkoutSdk:t}})},f=t.useRef(!1);t.useEffect(function(){var e=!0;return"async"!==a.tag||p.stripe?"sync"===a.tag&&a.stripe&&!f.current&&(f.current=!0,a.stripe.initCheckout(r).then(function(e){e&&(h(a.stripe,e),e.on("change",u))})):a.stripePromise.then(function(t){t&&e&&!f.current&&(f.current=!0,t.initCheckout(r).then(function(e){e&&(h(t,e),e.on("change",u))}))}),function(){e=!1}},[a,p,r,u]);var y=g(n);t.useEffect(function(){null!==y&&y!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[y,n]);var v=g(r),x=g(p.checkoutSdk);t.useEffect(function(){var e,t,n,s;if(p.checkoutSdk){var a=Boolean(!x&&p.checkoutSdk),o=null==v||null===(e=v.elementsOptions)||void 0===e?void 0:e.appearance,i=null==r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance,c=!b(i,o);i&&(c||a)&&p.checkoutSdk.changeAppearance(i);var l=null==v||null===(n=v.elementsOptions)||void 0===n?void 0:n.fonts,u=null==r||null===(s=r.elementsOptions)||void 0===s?void 0:s.fonts,d=!b(l,u);u&&(d||a)&&p.checkoutSdk.loadFonts(u)}},[r,v,p.checkoutSdk,x]),t.useEffect(function(){_(p.stripe)},[p.stripe]);var j=t.useMemo(function(){return function(e,t){if(!e)return null;e.on,e.session;var n=o(e,T);return t?Object.assign(t,n):Object.assign(e.session(),n)}(p.checkoutSdk,l)},[p.checkoutSdk,l]);return p.checkoutSdk?t.createElement(I.Provider,{value:p},t.createElement(D.Provider,{value:j},s)):null};M.propTypes={stripe:f.any,options:f.shape({fetchClientSecret:f.func.isRequired,elementsOptions:f.object}).isRequired};var L=function(e){var n=t.useContext(I),r=t.useContext(C);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?A(n,e):w(r,e)},R=["mode"],B=function(e,n){var r,s="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),a=n?function(e){L("mounts <".concat(s,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r,a=n.id,c=n.className,l=n.options,u=void 0===l?{}:l,d=n.onBlur,p=n.onFocus,m=n.onReady,h=n.onChange,f=n.onEscape,v=n.onClick,x=n.onLoadError,b=n.onLoaderStart,S=n.onNetworksChange,k=n.onConfirm,E=n.onCancel,_=n.onShippingAddressChange,C=n.onShippingRateChange,w=n.onSavedPaymentMethodRemove,N=n.onSavedPaymentMethodUpdate,P=L("mounts <".concat(s,">")),O="elements"in P?P.elements:null,T="checkoutSdk"in P?P.checkoutSdk:null,I=i(t.useState(null),2),A=I[0],D=I[1],M=t.useRef(null),B=t.useRef(null);y(A,"blur",d),y(A,"focus",p),y(A,"escape",f),y(A,"click",v),y(A,"loaderror",x),y(A,"loaderstart",b),y(A,"networkschange",S),y(A,"confirm",k),y(A,"cancel",E),y(A,"shippingaddresschange",_),y(A,"shippingratechange",C),y(A,"savedpaymentmethodremove",w),y(A,"savedpaymentmethodupdate",N),y(A,"change",h),m&&(r="expressCheckout"===e?m:function(){m(A)}),y(A,"ready",r),t.useLayoutEffect(function(){if(null===M.current&&null!==B.current&&(O||T)){var t=null;if(T)switch(e){case"payment":t=T.createPaymentElement(u);break;case"address":if(!("mode"in u))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=u.mode,r=o(u,R);if("shipping"===n)t=T.createShippingAddressElement(r);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=T.createBillingAddressElement(r)}break;case"expressCheckout":t=T.createExpressCheckoutElement(u);break;case"currencySelector":t=T.createCurrencySelectorElement();break;case"taxId":t=T.createTaxIdElement(u);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else O&&(t=O.create(e,u));M.current=t,D(t),t&&t.mount(B.current)}},[O,T,u]);var U=g(u);return t.useEffect(function(){if(M.current){var e=j(u,U,["paymentRequest"]);e&&"update"in M.current&&M.current.update(e)}},[u,U]),t.useLayoutEffect(function(){return function(){if(M.current&&"function"==typeof M.current.destroy)try{M.current.destroy(),M.current=null}catch(e){}}},[]),t.createElement("div",{id:a,className:c,ref:B})};return a.propTypes={id:f.string,className:f.string,onChange:f.func,onBlur:f.func,onFocus:f.func,onReady:f.func,onEscape:f.func,onClick:f.func,onLoadError:f.func,onLoaderStart:f.func,onNetworksChange:f.func,onConfirm:f.func,onCancel:f.func,onShippingAddressChange:f.func,onShippingRateChange:f.func,onSavedPaymentMethodRemove:f.func,onSavedPaymentMethodUpdate:f.func,options:f.object},a.displayName=s,a.__elementType=e,a},U="undefined"==typeof window,F=t.createContext(null);F.displayName="EmbeddedCheckoutProviderContext";var Y=function(){var e=t.useContext(F);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},$=U?function(e){var n=e.id,r=e.className;return Y(),t.createElement("div",{id:n,className:r})}:function(e){var n=e.id,r=e.className,s=Y().embeddedCheckout,a=t.useRef(!1),o=t.useRef(null);return t.useLayoutEffect(function(){return!a.current&&s&&null!==o.current&&(s.mount(o.current),a.current=!0),function(){if(a.current&&s)try{s.unmount(),a.current=!1}catch(e){}}},[s]),t.createElement("div",{ref:o,id:n,className:r})},q=B("auBankAccount",U),W=B("card",U),z=B("cardNumber",U),G=B("cardExpiry",U),V=B("cardCvc",U),H=B("fpxBank",U),J=B("iban",U),K=B("idealBank",U),X=B("p24Bank",U),Q=B("epsBank",U),Z=B("payment",U),ee=B("expressCheckout",U),te=B("currencySelector",U),ne=B("paymentRequestButton",U),re=B("linkAuthentication",U),se=B("address",U),ae=B("shippingAddress",U),oe=B("paymentMethodMessaging",U),ie=B("affirmMessage",U),ce=B("afterpayClearpayMessage",U),le=B("taxId",U);e.AddressElement=se,e.AffirmMessageElement=ie,e.AfterpayClearpayMessageElement=ce,e.AuBankAccountElement=q,e.CardCvcElement=V,e.CardElement=W,e.CardExpiryElement=G,e.CardNumberElement=z,e.CheckoutProvider=M,e.CurrencySelectorElement=te,e.Elements=N,e.ElementsConsumer=O,e.EmbeddedCheckout=$,e.EmbeddedCheckoutProvider=function(e){var n=e.stripe,r=e.options,s=e.children,a=t.useMemo(function(){return E(n,"Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[n]),o=t.useRef(null),c=t.useRef(null),l=i(t.useState({embeddedCheckout:null}),2),u=l[0],d=l[1];t.useEffect(function(){if(!c.current&&!o.current){var e=function(e){c.current||o.current||(c.current=e,o.current=c.current.initEmbeddedCheckout(r).then(function(e){d({embeddedCheckout:e})}))};"async"!==a.tag||c.current||!r.clientSecret&&!r.fetchClientSecret?"sync"!==a.tag||c.current||!r.clientSecret&&!r.fetchClientSecret||e(a.stripe):a.stripePromise.then(function(t){t&&e(t)})}},[a,r,u,c]),t.useEffect(function(){return function(){u.embeddedCheckout?(o.current=null,u.embeddedCheckout.destroy()):o.current&&o.current.then(function(){o.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()})}},[u.embeddedCheckout]),t.useEffect(function(){_(c)},[c]);var p=g(n);t.useEffect(function(){null!==p&&p!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[p,n]);var m=g(r);return t.useEffect(function(){null!=m&&(null!=r?(void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=m.clientSecret&&r.clientSecret!==m.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.fetchClientSecret&&r.fetchClientSecret!==m.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.onComplete&&r.onComplete!==m.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=m.onShippingDetailsChange&&r.onShippingDetailsChange!==m.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=m.onLineItemsChange&&r.onLineItemsChange!==m.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))},[m,r]),t.createElement(F.Provider,{value:u},s)},e.EpsBankElement=Q,e.ExpressCheckoutElement=ee,e.FpxBankElement=H,e.IbanElement=J,e.IdealBankElement=K,e.LinkAuthenticationElement=re,e.P24BankElement=X,e.PaymentElement=Z,e.PaymentMethodMessagingElement=oe,e.PaymentRequestButtonElement=ne,e.ShippingAddressElement=ae,e.TaxIdElement=le,e.useCheckout=function(){!function(e){var n=t.useContext(I);A(n,e)}("calls useCheckout()");var e=t.useContext(D);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},e.useElements=function(){return P("calls useElements()").elements},e.useStripe=function(){return L("calls useStripe()").stripe}}(t,n(609))},609(e){"use strict";e.exports=window.React}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element;var t,r="https://js.stripe.com",s="".concat(r,"/v3"),a=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,o=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,i="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",c=function(e){return a.test(e)||o.test(e)},l=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(s).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},u=null,d=null,p=null,m=!1,h=function(){return t||(t=(e=null,null!==u?u:(u=new Promise(function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(i),window.Stripe)t(window.Stripe);else try{var s=function(){for(var e=document.querySelectorAll('script[src^="'.concat(r,'"]')),t=0;t<e.length;t++){var n=e[t];if(c(n.src))return n}return null}();if(s&&e)console.warn(i);else if(s){if(s&&null!==p&&null!==d){var a;s.removeEventListener("load",p),s.removeEventListener("error",d),null===(a=s.parentNode)||void 0===a||a.removeChild(s),s=l(e)}}else s=l(e);p=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),d=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),s.addEventListener("load",p),s.addEventListener("error",d)}catch(e){return void n(e)}else t(null)})).catch(function(e){return u=null,Promise.reject(e)})).catch(function(e){return t=null,Promise.reject(e)}));var e};Promise.resolve().then(function(){return h()}).catch(function(e){m||console.warn(e)});var f=n(926);const y=window.wp.apiFetch;var g=n.n(y);const v=window.ReactJSXRuntime,{apiUrl:x,nonce:b}=window.strBookingData||{},j=window.strBookingProperty||{};function S(e){const[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r)}function k(e){if(!e)return"";const t=e instanceof Date?e:new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function E({propertyId:t,onDatesSelected:n,onError:r}){const[s,a]=(0,e.useState)(""),[o,i]=(0,e.useState)(""),[c,l]=(0,e.useState)(1),[u,d]=(0,e.useState)(!1),[p,m]=(0,e.useState)(!1),[h,f]=(0,e.useState)([]),[y,b]=(0,e.useState)(null),E=j.minNights||1,_=j.maxGuests||16;(0,e.useEffect)(()=>{!async function(){try{const e=new Date,n=await g()({url:`${x}/calendar/${t}?year=${e.getFullYear()}&month=${e.getMonth()+1}`,method:"GET"});Array.isArray(n)&&f(n.filter(e=>"available"!==e.status).map(e=>e.date))}catch(e){}}()},[t]);const C=(0,e.useCallback)(async()=>{if(s&&o){d(!0),b(null);try{const e=await g()({url:`${x}/availability`,method:"POST",data:{property_id:t,check_in:s,check_out:o}});b(e.available)}catch(e){r("Could not check availability. Please try again.")}finally{d(!1)}}},[s,o,t,r]);(0,e.useEffect)(()=>{s&&o&&C()},[s,o,C]);const w=k(new Date),N=s?k(function(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}(S(s),E)):w,P=s&&o?Math.round((S(o)-S(s))/864e5):0;return(0,v.jsxs)("div",{className:"str-date-picker",children:[(0,v.jsx)("h3",{children:"Select Your Dates"}),(0,v.jsxs)("div",{className:"str-field-group",children:[(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"str-checkin",children:"Check-in Date"}),(0,v.jsx)("input",{type:"date",id:"str-checkin",value:s,min:w,onChange:e=>{a(e.target.value),i(""),b(null)}})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"str-checkout",children:"Check-out Date"}),(0,v.jsx)("input",{type:"date",id:"str-checkout",value:o,min:N,disabled:!s,onChange:e=>{i(e.target.value),b(null)}})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"str-guests",children:"Guests"}),(0,v.jsx)("select",{id:"str-guests",value:c,onChange:e=>l(parseInt(e.target.value,10)),children:Array.from({length:_},(e,t)=>t+1).map(e=>(0,v.jsxs)("option",{value:e,children:[e," ",1===e?"guest":"guests"]},e))})]})]}),u&&(0,v.jsx)("p",{className:"str-status",children:"Checking availability..."}),!u&&!0===y&&P>0&&(0,v.jsx)("div",{className:"str-availability-ok",children:(0,v.jsxs)("p",{children:["âœ“ Available for ",P," ",1===P?"night":"nights"]})}),!u&&!1===y&&(0,v.jsx)("div",{className:"str-availability-unavailable",children:(0,v.jsx)("p",{children:"âœ— Sorry, those dates are not available. Please select different dates."})}),(0,v.jsx)("button",{className:"str-btn str-btn-primary",disabled:!y||p,onClick:async function(){if(s&&o&&y){m(!0);try{const e=await g()({url:`${x}/pricing`,method:"POST",data:{property_id:t,check_in:s,check_out:o,guests:c}});n(s,o,e)}catch(e){r("Could not calculate pricing. Please try again.")}finally{m(!1)}}},children:p?"Calculating...":"Continue â†’"})]})}b&&g().use(g().createNonceMiddleware(b));const{currency:_}=window.strBookingData||{};function C(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:(_||"usd").toUpperCase()}).format(e)}function w(e){if(!e)return"";const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}function N({pricing:t,dates:n,onSubmit:r,onBack:s}){const[a,o]=(0,e.useState)({guest_name:"",guest_email:"",guest_phone:"",special_requests:""}),[i,c]=(0,e.useState)({});function l(e){const{name:t,value:n}=e.target;o(e=>({...e,[t]:n})),c(e=>({...e,[t]:""}))}return(0,v.jsxs)("div",{className:"str-guest-form",children:[(0,v.jsxs)("div",{className:"str-pricing-summary",children:[(0,v.jsx)("h3",{children:"Booking Summary"}),(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsx)("span",{children:"Dates"}),(0,v.jsxs)("span",{children:[w(n.checkIn)," â†’ ",w(n.checkOut)]})]}),(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsxs)("span",{children:[C(t?.nightly_rate)," Ã— ",t?.nights," ",1===t?.nights?"night":"nights"]}),(0,v.jsx)("span",{children:C(t?.nightly_subtotal)})]}),t?.los_discount>0&&(0,v.jsxs)("div",{className:"str-summary-row str-discount",children:[(0,v.jsx)("span",{children:"Length-of-stay discount"}),(0,v.jsxs)("span",{children:["-",C(t.los_discount)]})]}),(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsx)("span",{children:"Cleaning fee"}),(0,v.jsx)("span",{children:C(t?.cleaning_fee)})]}),t?.security_deposit>0&&(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsx)("span",{children:"Security deposit"}),(0,v.jsx)("span",{children:C(t.security_deposit)})]}),(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsx)("span",{children:"Taxes"}),(0,v.jsx)("span",{children:C(t?.taxes)})]}),(0,v.jsxs)("div",{className:"str-summary-row str-total",children:[(0,v.jsx)("span",{children:"Total"}),(0,v.jsx)("span",{children:C(t?.total)})]})]}),(0,v.jsxs)("form",{onSubmit:function(e){e.preventDefault();const t=function(){const e={};return a.guest_name.trim()||(e.guest_name="Full name is required."),a.guest_email.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.guest_email)||(e.guest_email="A valid email address is required."),e}();Object.keys(t).length>0?c(t):r(a)},noValidate:!0,children:[(0,v.jsx)("h3",{children:"Your Details"}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"guest_name",children:"Full Name *"}),(0,v.jsx)("input",{type:"text",id:"guest_name",name:"guest_name",value:a.guest_name,onChange:l,autoComplete:"name",required:!0}),i.guest_name&&(0,v.jsx)("span",{className:"str-field-error",children:i.guest_name})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"guest_email",children:"Email Address *"}),(0,v.jsx)("input",{type:"email",id:"guest_email",name:"guest_email",value:a.guest_email,onChange:l,autoComplete:"email",required:!0}),i.guest_email&&(0,v.jsx)("span",{className:"str-field-error",children:i.guest_email})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"guest_phone",children:"Phone Number"}),(0,v.jsx)("input",{type:"tel",id:"guest_phone",name:"guest_phone",value:a.guest_phone,onChange:l,autoComplete:"tel"})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"special_requests",children:"Special Requests"}),(0,v.jsx)("textarea",{id:"special_requests",name:"special_requests",value:a.special_requests,onChange:l,rows:3,placeholder:"Allergies, accessibility needs, late arrival, etc."})]}),(0,v.jsxs)("div",{className:"str-btn-row",children:[(0,v.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:s,children:"â† Back"}),(0,v.jsx)("button",{type:"submit",className:"str-btn str-btn-primary",children:"Continue to Payment â†’"})]})]})]})}const{currency:P}=window.strBookingData||{};function O(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:(P||"usd").toUpperCase()}).format(e)}function T(e){if(!e)return"";const[t,n,r]=e.split("-");return new Date(Number(t),Number(n)-1,Number(r)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function I(e,t){const[n,r,s]=e.split("-").map(Number),a=new Date(n,r-1+t,s);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}function A({propertyId:t,pricing:n,checkin:r,eligiblePlans:s,planConfig:a,onSelect:o,onBack:i}){const c=n?.total||0,l=a?.two_deposit_pct||50,u=a?.two_days_before||42,d=a?.four_deposit_min_pct||25,p=Math.round(c*l/100*100)/100,m=Math.round(100*(c-p))/100,h=function(e,t){const[n,r,s]=e.split("-").map(Number),a=new Date(n,r-1,s-t);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}(r,u),f=Math.round(c*d/100*100)/100,[y,g]=(0,e.useState)(s.includes("pay_in_full")?"pay_in_full":s[0]||"pay_in_full"),[x,b]=(0,e.useState)(f),j=(0,e.useMemo)(()=>{const e=Math.max(x,f),t=Math.round(100*(c-e))/100,n=Math.round(t/3*100)/100,s=Math.round(100*(t-2*n))/100;return[{number:2,amount:n,due_date:I(r,-3)},{number:3,amount:n,due_date:I(r,-2)},{number:4,amount:s,due_date:I(r,-1)}]},[x,c,r,f]);return(0,v.jsxs)("div",{className:"str-plan-selector",children:[(0,v.jsx)("h3",{children:"Choose Your Payment Plan"}),(0,v.jsxs)("p",{style:{color:"#666",marginTop:0},children:["Total booking cost: ",(0,v.jsx)("strong",{children:O(c)})]}),(0,v.jsxs)("div",{className:"str-plan-options",children:[s.includes("pay_in_full")&&(0,v.jsxs)("label",{className:"str-plan-option "+("pay_in_full"===y?"is-selected":""),style:D("pay_in_full"===y),children:[(0,v.jsx)("input",{type:"radio",name:"payment_plan",value:"pay_in_full",checked:"pay_in_full"===y,onChange:()=>g("pay_in_full"),style:{marginRight:"10px"}}),(0,v.jsxs)("span",{children:[(0,v.jsx)("strong",{children:"Pay in Full"}),(0,v.jsxs)("span",{style:{display:"block",color:"#444",fontSize:"13px",marginTop:"2px"},children:[O(c)," due today"]})]})]}),s.includes("two_payment")&&(0,v.jsxs)("label",{className:"str-plan-option "+("two_payment"===y?"is-selected":""),style:D("two_payment"===y),children:[(0,v.jsx)("input",{type:"radio",name:"payment_plan",value:"two_payment",checked:"two_payment"===y,onChange:()=>g("two_payment"),style:{marginRight:"10px"}}),(0,v.jsxs)("span",{children:[(0,v.jsx)("strong",{children:"2 Payments"}),(0,v.jsxs)("span",{style:{display:"block",color:"#444",fontSize:"13px",marginTop:"2px"},children:[O(p)," today,"," ","then ",O(m)," on ",T(h)]})]})]}),s.includes("four_payment")&&(0,v.jsxs)("label",{className:"str-plan-option "+("four_payment"===y?"is-selected":""),style:D("four_payment"===y),children:[(0,v.jsx)("input",{type:"radio",name:"payment_plan",value:"four_payment",checked:"four_payment"===y,onChange:()=>g("four_payment"),style:{marginRight:"10px"}}),(0,v.jsxs)("span",{children:[(0,v.jsx)("strong",{children:"4 Payments"}),(0,v.jsx)("span",{style:{display:"block",color:"#444",fontSize:"13px",marginTop:"2px"},children:"Choose deposit + 3 equal installments"})]})]})]}),"four_payment"===y&&(0,v.jsxs)("div",{className:"str-four-payment-config",style:{marginTop:"20px",padding:"16px",background:"#f7f7f7",borderRadius:"6px"},children:[(0,v.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:["Initial deposit amount (minimum ",O(f),")"]}),(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,v.jsx)("span",{children:"$"}),(0,v.jsx)("input",{type:"number",min:f,max:c,step:"0.01",value:x,onChange:e=>{const t=parseFloat(e.target.value)||f;b(Math.min(Math.max(t,f),c))},style:{width:"120px",padding:"6px 8px",border:"1px solid #ccc",borderRadius:"4px"}})]}),(0,v.jsxs)("div",{style:{marginTop:"16px"},children:[(0,v.jsx)("p",{style:{margin:"0 0 8px",fontWeight:600,fontSize:"13px"},children:"Payment schedule:"}),(0,v.jsxs)("div",{style:{display:"grid",gap:"6px"},children:[(0,v.jsxs)("div",{style:M,children:[(0,v.jsx)("span",{children:"Payment 1 (today)"}),(0,v.jsx)("strong",{children:O(Math.max(x,f))})]}),j.map(e=>(0,v.jsxs)("div",{style:M,children:[(0,v.jsxs)("span",{children:["Payment ",e.number," â€” ",T(e.due_date)]}),(0,v.jsx)("strong",{children:O(e.amount)})]},e.number))]})]})]}),"two_payment"===y&&(0,v.jsxs)("div",{className:"str-two-payment-summary",style:{marginTop:"16px",padding:"14px",background:"#f7f7f7",borderRadius:"6px"},children:[(0,v.jsx)("p",{style:{margin:"0 0 8px",fontWeight:600,fontSize:"13px"},children:"Payment schedule:"}),(0,v.jsxs)("div",{style:{display:"grid",gap:"6px"},children:[(0,v.jsxs)("div",{style:M,children:[(0,v.jsx)("span",{children:"Payment 1 (today)"}),(0,v.jsx)("strong",{children:O(p)})]}),(0,v.jsxs)("div",{style:M,children:[(0,v.jsxs)("span",{children:["Payment 2 â€” ",T(h)]}),(0,v.jsx)("strong",{children:O(m)})]})]})]}),(0,v.jsxs)("div",{className:"str-btn-row",style:{marginTop:"24px"},children:[(0,v.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:i,children:"â† Back"}),(0,v.jsx)("button",{type:"button",className:"str-btn str-btn-primary",onClick:function(){let e=c,t=null;if("two_payment"===y)e=p,t=[{number:1,amount:p,due_date:"today",status:"pending"},{number:2,amount:m,due_date:h,status:"pending"}];else if("four_payment"===y){const n=Math.max(x,f);e=n,t=[{number:1,amount:n,due_date:"today",status:"pending"},...j]}o({plan:y,depositAmount:e,schedule:t})},children:"Continue to Payment â†’"})]})]})}function D(e){return{display:"flex",alignItems:"flex-start",padding:"14px 16px",marginBottom:"10px",border:"2px solid "+(e?"#1a1a2e":"#ddd"),borderRadius:"6px",cursor:"pointer",background:e?"#f0f0f8":"#fff",transition:"border-color 0.15s, background 0.15s"}}const M={display:"flex",justifyContent:"space-between",fontSize:"13px",padding:"4px 0",borderBottom:"1px solid #eee"},{apiUrl:L}=window.strBookingData||{};function R(e,t="usd"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase()}).format(e)}function B(e){if(!e||"today"===e)return"today";const[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}const U={pay_in_full:"Pay in Full",two_payment:"2-Payment Plan",four_payment:"4-Payment Plan"};function F({propertyId:t,dates:n,pricing:r,guestDetails:s,paymentPlan:a,onSuccess:o,onBack:i,onError:c}){const l=(0,f.useStripe)(),u=(0,f.useElements)(),[d,p]=(0,e.useState)(null),[m,h]=(0,e.useState)(null),[y,x]=(0,e.useState)(null),[b,j]=(0,e.useState)(!1),[S,k]=(0,e.useState)(!1),[E,_]=(0,e.useState)(!1),[C,w]=(0,e.useState)(!1),{currency:N}=window.strBookingData||{},P=a?.plan||"pay_in_full",O=a?.depositAmount||r?.total||0;if((0,e.useState)(()=>{!async function(){j(!0);try{const e={property_id:t,check_in:n.checkIn,check_out:n.checkOut,guest_name:s.guest_name,guest_email:s.guest_email,guest_phone:s.guest_phone||"",guest_count:s.guest_count||1,special_requests:s.special_requests||"",payment_plan:P};"four_payment"===P&&(e.deposit_amount=O);const r=await g()({url:`${L}/booking`,method:"POST",data:e});p(r.client_secret),h(r.booking_id),r.installment_schedule&&x(r.installment_schedule),_(!0)}catch(e){c(e?.message||"Could not initialize payment. Please go back and try again.")}finally{j(!1)}}()}),C&&y)return(0,v.jsx)(Y,{schedule:y,plan:P,currency:N});if(b)return(0,v.jsx)("div",{className:"str-payment-loading",children:(0,v.jsx)("p",{children:"Preparing your booking..."})});if(!E)return null;const T={clientSecret:d,appearance:{theme:"stripe",variables:{colorPrimary:"#1a1a2e",borderRadius:"6px"}}},I="pay_in_full"!==P?O:r?.total;return(0,v.jsxs)("div",{className:"str-payment-form",children:[(0,v.jsxs)("div",{className:"str-payment-summary",children:[(0,v.jsx)("h3",{children:"Payment"}),"pay_in_full"===P?(0,v.jsxs)("p",{className:"str-total-due",children:["Total due today:"," ",(0,v.jsx)("strong",{children:R(r?.total,N)})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("p",{className:"str-total-due",children:[U[P]," â€” Due today:"," ",(0,v.jsx)("strong",{children:R(O,N)})]}),(0,v.jsxs)("p",{style:{color:"#666",fontSize:"13px",margin:"4px 0 0"},children:["Booking total: ",R(r?.total,N)," ","Â· Remaining"," ",R((r?.total||0)-O,N)," ","charged automatically per your plan"]})]}),r?.security_deposit>0&&(0,v.jsxs)("p",{className:"str-deposit-note",children:["Includes ",R(r.security_deposit,N)," security deposit, refundable after check-out."]})]}),(0,v.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),!l||!u||!d)return;k(!0);const{error:t}=await l.confirmPayment({elements:u,confirmParams:{return_url:window.location.href,payment_method_data:{billing_details:{name:s.guest_name,email:s.guest_email,phone:s.guest_phone||void 0}}},redirect:"if_required"});if(t)return c(t.message),void k(!1);w(!0),k(!1),o({bookingId:m,total:r?.total,currency:N,plan:P,depositAmount:O,installmentSchedule:y})},children:[d&&(0,v.jsx)(f.PaymentElement,{id:"str-payment-element",options:T}),(0,v.jsxs)("div",{className:"str-btn-row",style:{marginTop:"24px"},children:[(0,v.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:i,disabled:S,children:"â† Back"}),(0,v.jsx)("button",{type:"submit",className:"str-btn str-btn-primary",disabled:!l||!u||S,children:S?"Processing...":`Pay ${R(I,N)}`})]}),(0,v.jsx)("p",{className:"str-secure-notice",children:"ðŸ”’ Payment secured by Stripe. Your card details are never stored on this site."})]})]})}function Y({schedule:e,plan:t,currency:n}){return e&&e.length?(0,v.jsxs)("div",{className:"str-installment-summary",style:{padding:"16px",background:"#f7f7f7",borderRadius:"6px"},children:[(0,v.jsxs)("h4",{style:{marginTop:0},children:[U[t]," â€” Your Payment Schedule"]}),(0,v.jsx)("div",{style:{display:"grid",gap:"6px"},children:e.map(e=>(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",padding:"6px 0",borderBottom:"1px solid #eee"},children:[(0,v.jsxs)("span",{children:["Payment ",e.number," ","today"===e.due_date||e.due_date===(new Date).toISOString().slice(0,10)?"(today)":`â€” ${B(e.due_date)}`]}),(0,v.jsx)("strong",{children:R(e.amount,n)})]},e.number))}),(0,v.jsx)("p",{style:{fontSize:"12px",color:"#666",marginBottom:0},children:"Future payments will be automatically charged to your card on file."})]}):null}const{currency:$}=window.strBookingData||{};function q(e){if(!e)return"";const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}function W({bookingResult:e,guestDetails:t,dates:n,pricing:r}){return(0,v.jsxs)("div",{className:"str-confirmation",children:[(0,v.jsx)("div",{className:"str-confirmation-icon",children:"âœ“"}),(0,v.jsx)("h2",{children:"Booking Confirmed!"}),(0,v.jsxs)("p",{className:"str-confirmation-sub",children:["A confirmation has been sent to ",(0,v.jsx)("strong",{children:t?.guest_email})]}),e?.bookingId&&(0,v.jsxs)("p",{className:"str-confirmation-number",children:["Booking #",e.bookingId]}),(0,v.jsxs)("div",{className:"str-confirmation-details",children:[(0,v.jsxs)("div",{className:"str-detail-row",children:[(0,v.jsx)("span",{children:"Check-in"}),(0,v.jsx)("span",{children:q(n?.checkIn)})]}),(0,v.jsxs)("div",{className:"str-detail-row",children:[(0,v.jsx)("span",{children:"Check-out"}),(0,v.jsx)("span",{children:q(n?.checkOut)})]}),(0,v.jsxs)("div",{className:"str-detail-row",children:[(0,v.jsx)("span",{children:"Nights"}),(0,v.jsx)("span",{children:r?.nights})]}),(0,v.jsxs)("div",{className:"str-detail-row str-total",children:[(0,v.jsx)("span",{children:"Total Charged"}),(0,v.jsx)("span",{children:(s=r?.total,new Intl.NumberFormat("en-US",{style:"currency",currency:($||"usd").toUpperCase()}).format(s))})]})]}),(0,v.jsx)("p",{className:"str-confirmation-next",children:"You'll receive pre-arrival instructions 3 days before check-in, and check-in details on the morning of your arrival."})]});var s}const z={DATES:"DATES",GUEST_DETAILS:"GUEST_DETAILS",PLAN_SELECTION:"PLAN_SELECTION",PAYMENT:"PAYMENT",CONFIRMATION:"CONFIRMATION"},G=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];m=!0;var r=Date.now();return h().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),s=function(e){return 3===e?"v3":e}(e.version);r&&"v3"!==s&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat("v3",". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:t})}(a,n),a}(e,t,r)})}(window.strBookingData?.stripePublishableKey||"");function V({propertyId:t}){const[n,r]=(0,e.useState)(z.DATES),[s,a]=(0,e.useState)({checkIn:null,checkOut:null}),[o,i]=(0,e.useState)(null),[c,l]=(0,e.useState)({}),[u,d]=(0,e.useState)(null),[p,m]=(0,e.useState)(null),[h,y]=(0,e.useState)(null),g=window.strBookingProperty?.planConfig||{},x=function(e){const t=[];if(!1!==g.full_enabled&&t.push("pay_in_full"),!e)return t;const n=new Date(e+"T00:00:00").getTime(),r=Date.now(),s=Math.floor((n-r)/864e5);return g.two_enabled&&s>(g.two_days_before||42)&&t.push("two_payment"),g.four_enabled&&s>90&&t.push("four_payment"),t}(s.checkIn),b=x.length>1;function j(){y(null),n===z.GUEST_DETAILS?r(z.DATES):n===z.PLAN_SELECTION?r(z.GUEST_DETAILS):n===z.PAYMENT&&r(b?z.PLAN_SELECTION:z.GUEST_DETAILS)}const S={[z.DATES]:"1. Select Dates",[z.GUEST_DETAILS]:"2. Your Details",[z.PLAN_SELECTION]:"3. Payment Plan",[z.PAYMENT]:b?"4. Payment":"3. Payment",[z.CONFIRMATION]:"Confirmed!"},k=b?Object.values(z):Object.values(z).filter(e=>e!==z.PLAN_SELECTION);return(0,v.jsxs)("div",{className:"str-booking-widget",children:[n!==z.CONFIRMATION&&(0,v.jsx)("nav",{className:"str-steps",children:k.map(e=>(0,v.jsx)("span",{className:`str-step ${n===e?"is-active":""} ${H(e,n,k)?"is-complete":""}`,children:S[e]},e))}),h&&(0,v.jsx)("div",{className:"str-error-message",role:"alert",children:h}),n===z.DATES&&(0,v.jsx)(E,{propertyId:t,onDatesSelected:function(e,t,n){a({checkIn:e,checkOut:t}),i(n),r(z.GUEST_DETAILS),y(null)},onError:y}),n===z.GUEST_DETAILS&&(0,v.jsx)(N,{pricing:o,dates:s,onSubmit:function(e){l(e),y(null),b?r(z.PLAN_SELECTION):(d({plan:"pay_in_full",depositAmount:o?.total,schedule:null}),r(z.PAYMENT))},onBack:j}),n===z.PLAN_SELECTION&&(0,v.jsx)(A,{propertyId:t,pricing:o,checkin:s.checkIn,eligiblePlans:x,planConfig:g,onSelect:function(e){d(e),r(z.PAYMENT),y(null)},onBack:j}),n===z.PAYMENT&&(0,v.jsx)(f.Elements,{stripe:G,children:(0,v.jsx)(F,{propertyId:t,dates:s,pricing:o,guestDetails:c,paymentPlan:u,onSuccess:function(e){m(e),r(z.CONFIRMATION)},onBack:j,onError:y})}),n===z.CONFIRMATION&&(0,v.jsx)(W,{bookingResult:p,guestDetails:c,dates:s,pricing:o})]})}function H(e,t,n){return n.indexOf(e)<n.indexOf(t)}document.body.classList.contains("et-fb")||window.ETBuilderBackend||document.querySelectorAll(".str-booking-widget[data-property-id]").forEach(t=>{const n=parseInt(t.dataset.propertyId,10);n&&(0,e.createRoot)(t).render((0,v.jsx)(V,{propertyId:n}))})})()})();