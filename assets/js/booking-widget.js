(()=>{var e={926(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,s,o=[],_n=!0,i=!1;try{for(n=n.call(e);!(_n=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);_n=!0);}catch(e){i=!0,s=e}finally{try{_n||null==n.return||n.return()}finally{if(i)throw s}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l,d,p,m,h={exports:{}};h.exports=function(){if(m)return p;m=1;var e=d?l:(d=1,l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,p=function(){function r(t,n,r,s,o,i){if(i!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function s(){return r}r.isRequired=r;var o={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o}}()();var f=u(h.exports),y=function(e,n,r){var s=!!r,o=t.useRef(r);t.useEffect(function(){o.current=r},[r]),t.useEffect(function(){if(!s||!e)return function(){};var t=function(){o.current&&o.current.apply(o,arguments)};return e.on(n,t),function(){e.off(n,t)}},[s,n,e,o])},g=function(e){var n=t.useRef(e);return t.useEffect(function(){n.current=e},[e]),n.current},v=function(e){return null!==e&&"object"===s(e)},b="[object Object]",k=function e(t,n){if(!v(t)||!v(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var s=Object.prototype.toString.call(t)===b;if(s!==(Object.prototype.toString.call(n)===b))return!1;if(!s&&!r)return t===n;var o=Object.keys(t),i=Object.keys(n);if(o.length!==i.length)return!1;for(var a={},c=0;c<o.length;c+=1)a[o[c]]=!0;for(var u=0;u<i.length;u+=1)a[i[u]]=!0;var l=Object.keys(a);if(l.length!==o.length)return!1;var d=t,p=n;return l.every(function(t){return e(d[t],p[t])})},S=function(e,t,n){return v(e)?Object.keys(e).reduce(function(s,i){var a=!v(t)||!k(e[i],t[i]);return n.includes(i)?(a&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),s):a?r(r({},s||{}),{},o({},i,e[i])):s},null):null},j="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",x=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;if(null===e||v(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(n)},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;if(function(e){return v(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return x(e,t)})};var n=x(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},C=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.10.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.10.0",url:"https://stripe.com/docs/stripe-js/react"}))},w=t.createContext(null);w.displayName="ElementsContext";var N=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},_=function(e){var n=e.stripe,r=e.options,s=e.children,o=t.useMemo(function(){return E(n)},[n]),i=a(t.useState(function(){return{stripe:"sync"===o.tag?o.stripe:null,elements:"sync"===o.tag?o.stripe.elements(r):null}}),2),c=i[0],u=i[1];t.useEffect(function(){var e=!0,t=function(e){u(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==o.tag||c.stripe?"sync"!==o.tag||c.stripe||t(o.stripe):o.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[o,c,r]);var l=g(n);t.useEffect(function(){null!==l&&l!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[l,n]);var d=g(r);return t.useEffect(function(){if(c.elements){var e=S(r,d,["clientSecret","fonts"]);e&&c.elements.update(e)}},[r,d,c.elements]),t.useEffect(function(){C(c.stripe)},[c.stripe]),t.createElement(w.Provider,{value:c},s)};_.propTypes={stripe:f.any,options:f.object};var P=function(e){var n=t.useContext(w);return N(n,e)},O=function(e){return(0,e.children)(P("mounts <ElementsConsumer>"))};O.propTypes={children:f.func.isRequired};var A=["on","session"],I=t.createContext(null);I.displayName="CheckoutSdkContext";var T=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},D=t.createContext(null);D.displayName="CheckoutContext";var R=function(e){var n=e.stripe,r=e.options,s=e.children,o=t.useMemo(function(){return E(n,"Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[n]),c=a(t.useState(null),2),u=c[0],l=c[1],d=a(t.useState(function(){return{stripe:"sync"===o.tag?o.stripe:null,checkoutSdk:null}}),2),p=d[0],m=d[1],h=function(e,t){m(function(n){return n.stripe&&n.checkoutSdk?n:{stripe:e,checkoutSdk:t}})},f=t.useRef(!1);t.useEffect(function(){var e=!0;return"async"!==o.tag||p.stripe?"sync"===o.tag&&o.stripe&&!f.current&&(f.current=!0,o.stripe.initCheckout(r).then(function(e){e&&(h(o.stripe,e),e.on("change",l))})):o.stripePromise.then(function(t){t&&e&&!f.current&&(f.current=!0,t.initCheckout(r).then(function(e){e&&(h(t,e),e.on("change",l))}))}),function(){e=!1}},[o,p,r,l]);var y=g(n);t.useEffect(function(){null!==y&&y!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[y,n]);var v=g(r),b=g(p.checkoutSdk);t.useEffect(function(){var e,t,n,s;if(p.checkoutSdk){var o=Boolean(!b&&p.checkoutSdk),i=null==v||null===(e=v.elementsOptions)||void 0===e?void 0:e.appearance,a=null==r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance,c=!k(a,i);a&&(c||o)&&p.checkoutSdk.changeAppearance(a);var u=null==v||null===(n=v.elementsOptions)||void 0===n?void 0:n.fonts,l=null==r||null===(s=r.elementsOptions)||void 0===s?void 0:s.fonts,d=!k(u,l);l&&(d||o)&&p.checkoutSdk.loadFonts(l)}},[r,v,p.checkoutSdk,b]),t.useEffect(function(){C(p.stripe)},[p.stripe]);var S=t.useMemo(function(){return function(e,t){if(!e)return null;e.on,e.session;var n=i(e,A);return t?Object.assign(t,n):Object.assign(e.session(),n)}(p.checkoutSdk,u)},[p.checkoutSdk,u]);return p.checkoutSdk?t.createElement(I.Provider,{value:p},t.createElement(D.Provider,{value:S},s)):null};R.propTypes={stripe:f.any,options:f.shape({fetchClientSecret:f.func.isRequired,elementsOptions:f.object}).isRequired};var M=function(e){var n=t.useContext(I),r=t.useContext(w);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?T(n,e):N(r,e)},B=["mode"],U=function(e,n){var r,s="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),o=n?function(e){M("mounts <".concat(s,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r,o=n.id,c=n.className,u=n.options,l=void 0===u?{}:u,d=n.onBlur,p=n.onFocus,m=n.onReady,h=n.onChange,f=n.onEscape,v=n.onClick,b=n.onLoadError,k=n.onLoaderStart,j=n.onNetworksChange,x=n.onConfirm,E=n.onCancel,C=n.onShippingAddressChange,w=n.onShippingRateChange,N=n.onSavedPaymentMethodRemove,_=n.onSavedPaymentMethodUpdate,P=M("mounts <".concat(s,">")),O="elements"in P?P.elements:null,A="checkoutSdk"in P?P.checkoutSdk:null,I=a(t.useState(null),2),T=I[0],D=I[1],R=t.useRef(null),U=t.useRef(null);y(T,"blur",d),y(T,"focus",p),y(T,"escape",f),y(T,"click",v),y(T,"loaderror",b),y(T,"loaderstart",k),y(T,"networkschange",j),y(T,"confirm",x),y(T,"cancel",E),y(T,"shippingaddresschange",C),y(T,"shippingratechange",w),y(T,"savedpaymentmethodremove",N),y(T,"savedpaymentmethodupdate",_),y(T,"change",h),m&&(r="expressCheckout"===e?m:function(){m(T)}),y(T,"ready",r),t.useLayoutEffect(function(){if(null===R.current&&null!==U.current&&(O||A)){var t=null;if(A)switch(e){case"payment":t=A.createPaymentElement(l);break;case"address":if(!("mode"in l))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=l.mode,r=i(l,B);if("shipping"===n)t=A.createShippingAddressElement(r);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=A.createBillingAddressElement(r)}break;case"expressCheckout":t=A.createExpressCheckoutElement(l);break;case"currencySelector":t=A.createCurrencySelectorElement();break;case"taxId":t=A.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else O&&(t=O.create(e,l));R.current=t,D(t),t&&t.mount(U.current)}},[O,A,l]);var F=g(l);return t.useEffect(function(){if(R.current){var e=S(l,F,["paymentRequest"]);e&&"update"in R.current&&R.current.update(e)}},[l,F]),t.useLayoutEffect(function(){return function(){if(R.current&&"function"==typeof R.current.destroy)try{R.current.destroy(),R.current=null}catch(e){}}},[]),t.createElement("div",{id:o,className:c,ref:U})};return o.propTypes={id:f.string,className:f.string,onChange:f.func,onBlur:f.func,onFocus:f.func,onReady:f.func,onEscape:f.func,onClick:f.func,onLoadError:f.func,onLoaderStart:f.func,onNetworksChange:f.func,onConfirm:f.func,onCancel:f.func,onShippingAddressChange:f.func,onShippingRateChange:f.func,onSavedPaymentMethodRemove:f.func,onSavedPaymentMethodUpdate:f.func,options:f.object},o.displayName=s,o.__elementType=e,o},F="undefined"==typeof window,L=t.createContext(null);L.displayName="EmbeddedCheckoutProviderContext";var Y=function(){var e=t.useContext(L);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},q=F?function(e){var n=e.id,r=e.className;return Y(),t.createElement("div",{id:n,className:r})}:function(e){var n=e.id,r=e.className,s=Y().embeddedCheckout,o=t.useRef(!1),i=t.useRef(null);return t.useLayoutEffect(function(){return!o.current&&s&&null!==i.current&&(s.mount(i.current),o.current=!0),function(){if(o.current&&s)try{s.unmount(),o.current=!1}catch(e){}}},[s]),t.createElement("div",{ref:i,id:n,className:r})},$=U("auBankAccount",F),G=U("card",F),W=U("cardNumber",F),z=U("cardExpiry",F),V=U("cardCvc",F),H=U("fpxBank",F),J=U("iban",F),K=U("idealBank",F),X=U("p24Bank",F),Q=U("epsBank",F),Z=U("payment",F),ee=U("expressCheckout",F),te=U("currencySelector",F),ne=U("paymentRequestButton",F),re=U("linkAuthentication",F),se=U("address",F),oe=U("shippingAddress",F),ie=U("paymentMethodMessaging",F),ae=U("affirmMessage",F),ce=U("afterpayClearpayMessage",F),ue=U("taxId",F);e.AddressElement=se,e.AffirmMessageElement=ae,e.AfterpayClearpayMessageElement=ce,e.AuBankAccountElement=$,e.CardCvcElement=V,e.CardElement=G,e.CardExpiryElement=z,e.CardNumberElement=W,e.CheckoutProvider=R,e.CurrencySelectorElement=te,e.Elements=_,e.ElementsConsumer=O,e.EmbeddedCheckout=q,e.EmbeddedCheckoutProvider=function(e){var n=e.stripe,r=e.options,s=e.children,o=t.useMemo(function(){return E(n,"Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[n]),i=t.useRef(null),c=t.useRef(null),u=a(t.useState({embeddedCheckout:null}),2),l=u[0],d=u[1];t.useEffect(function(){if(!c.current&&!i.current){var e=function(e){c.current||i.current||(c.current=e,i.current=c.current.initEmbeddedCheckout(r).then(function(e){d({embeddedCheckout:e})}))};"async"!==o.tag||c.current||!r.clientSecret&&!r.fetchClientSecret?"sync"!==o.tag||c.current||!r.clientSecret&&!r.fetchClientSecret||e(o.stripe):o.stripePromise.then(function(t){t&&e(t)})}},[o,r,l,c]),t.useEffect(function(){return function(){l.embeddedCheckout?(i.current=null,l.embeddedCheckout.destroy()):i.current&&i.current.then(function(){i.current=null,l.embeddedCheckout&&l.embeddedCheckout.destroy()})}},[l.embeddedCheckout]),t.useEffect(function(){C(c)},[c]);var p=g(n);t.useEffect(function(){null!==p&&p!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[p,n]);var m=g(r);return t.useEffect(function(){null!=m&&(null!=r?(void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=m.clientSecret&&r.clientSecret!==m.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.fetchClientSecret&&r.fetchClientSecret!==m.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.onComplete&&r.onComplete!==m.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=m.onShippingDetailsChange&&r.onShippingDetailsChange!==m.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=m.onLineItemsChange&&r.onLineItemsChange!==m.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))},[m,r]),t.createElement(L.Provider,{value:l},s)},e.EpsBankElement=Q,e.ExpressCheckoutElement=ee,e.FpxBankElement=H,e.IbanElement=J,e.IdealBankElement=K,e.LinkAuthenticationElement=re,e.P24BankElement=X,e.PaymentElement=Z,e.PaymentMethodMessagingElement=ie,e.PaymentRequestButtonElement=ne,e.ShippingAddressElement=oe,e.TaxIdElement=ue,e.useCheckout=function(){!function(e){var n=t.useContext(I);T(n,e)}("calls useCheckout()");var e=t.useContext(D);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},e.useElements=function(){return P("calls useElements()").elements},e.useStripe=function(){return M("calls useStripe()").stripe}}(t,n(609))},609(e){"use strict";e.exports=window.React}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element;var t,r="https://js.stripe.com",s="".concat(r,"/v3"),o=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,i=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,a="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",c=function(e){return o.test(e)||i.test(e)},u=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(s).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},l=null,d=null,p=null,m=!1,h=function(){return t||(t=(e=null,null!==l?l:(l=new Promise(function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(a),window.Stripe)t(window.Stripe);else try{var s=function(){for(var e=document.querySelectorAll('script[src^="'.concat(r,'"]')),t=0;t<e.length;t++){var n=e[t];if(c(n.src))return n}return null}();if(s&&e)console.warn(a);else if(s){if(s&&null!==p&&null!==d){var o;s.removeEventListener("load",p),s.removeEventListener("error",d),null===(o=s.parentNode)||void 0===o||o.removeChild(s),s=u(e)}}else s=u(e);p=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),d=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),s.addEventListener("load",p),s.addEventListener("error",d)}catch(e){return void n(e)}else t(null)})).catch(function(e){return l=null,Promise.reject(e)})).catch(function(e){return t=null,Promise.reject(e)}));var e};Promise.resolve().then(function(){return h()}).catch(function(e){m||console.warn(e)});var f=n(926);const y=window.wp.apiFetch;var g=n.n(y);const v=window.ReactJSXRuntime,{apiUrl:b,nonce:k}=window.strBookingData||{},S=window.strBookingProperty||{};function j(e){if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function x({propertyId:t,onDatesSelected:n,onError:r}){const[s,o]=(0,e.useState)(""),[i,a]=(0,e.useState)(""),[c,u]=(0,e.useState)(1),[l,d]=(0,e.useState)(!1),[p,m]=(0,e.useState)(!1),[h,f]=(0,e.useState)([]),[y,k]=(0,e.useState)(null),x=S.minNights||1,E=S.maxGuests||16;(0,e.useEffect)(()=>{!async function(){try{const e=new Date,n=await g()({url:`${b}/admin/availability/${t}?year=${e.getFullYear()}&month=${e.getMonth()+1}`,method:"GET"});Array.isArray(n)&&f(n.filter(e=>"available"!==e.status).map(e=>e.date))}catch(e){}}()},[t]);const C=(0,e.useCallback)(async()=>{if(s&&i){d(!0),k(null);try{const e=await g()({url:`${b}/availability`,method:"POST",data:{property_id:t,check_in:s,check_out:i}});k(e.available)}catch(e){r("Could not check availability. Please try again.")}finally{d(!1)}}},[s,i,t,r]);(0,e.useEffect)(()=>{s&&i&&C()},[s,i,C]);const w=j(new Date),N=s?j(function(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}(new Date(s),x)):w,_=s&&i?Math.round((new Date(i)-new Date(s))/864e5):0;return(0,v.jsxs)("div",{className:"str-date-picker",children:[(0,v.jsx)("h3",{children:"Select Your Dates"}),(0,v.jsxs)("div",{className:"str-field-group",children:[(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"str-checkin",children:"Check-in Date"}),(0,v.jsx)("input",{type:"date",id:"str-checkin",value:s,min:w,onChange:e=>{o(e.target.value),a(""),k(null)}})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"str-checkout",children:"Check-out Date"}),(0,v.jsx)("input",{type:"date",id:"str-checkout",value:i,min:N,disabled:!s,onChange:e=>{a(e.target.value),k(null)}})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"str-guests",children:"Guests"}),(0,v.jsx)("select",{id:"str-guests",value:c,onChange:e=>u(parseInt(e.target.value,10)),children:Array.from({length:E},(e,t)=>t+1).map(e=>(0,v.jsxs)("option",{value:e,children:[e," ",1===e?"guest":"guests"]},e))})]})]}),l&&(0,v.jsx)("p",{className:"str-status",children:"Checking availability..."}),!l&&!0===y&&_>0&&(0,v.jsx)("div",{className:"str-availability-ok",children:(0,v.jsxs)("p",{children:["‚úì Available for ",_," ",1===_?"night":"nights"]})}),!l&&!1===y&&(0,v.jsx)("div",{className:"str-availability-unavailable",children:(0,v.jsx)("p",{children:"‚úó Sorry, those dates are not available. Please select different dates."})}),(0,v.jsx)("button",{className:"str-btn str-btn-primary",disabled:!y||p,onClick:async function(){if(s&&i&&y){m(!0);try{const e=await g()({url:`${b}/pricing`,method:"POST",data:{property_id:t,check_in:s,check_out:i,guests:c}});n(s,i,e)}catch(e){r("Could not calculate pricing. Please try again.")}finally{m(!1)}}},children:p?"Calculating...":"Continue ‚Üí"})]})}k&&g().use(g().createNonceMiddleware(k));const{currency:E}=window.strBookingData||{};function C(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:(E||"usd").toUpperCase()}).format(e)}function w(e){if(!e)return"";const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}function N({pricing:t,dates:n,onSubmit:r,onBack:s}){const[o,i]=(0,e.useState)({guest_name:"",guest_email:"",guest_phone:"",special_requests:""}),[a,c]=(0,e.useState)({});function u(e){const{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),c(e=>({...e,[t]:""}))}return(0,v.jsxs)("div",{className:"str-guest-form",children:[(0,v.jsxs)("div",{className:"str-pricing-summary",children:[(0,v.jsx)("h3",{children:"Booking Summary"}),(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsx)("span",{children:"Dates"}),(0,v.jsxs)("span",{children:[w(n.checkIn)," ‚Üí ",w(n.checkOut)]})]}),(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsxs)("span",{children:[C(t?.nightly_rate)," √ó ",t?.nights," ",1===t?.nights?"night":"nights"]}),(0,v.jsx)("span",{children:C(t?.nightly_subtotal)})]}),t?.los_discount>0&&(0,v.jsxs)("div",{className:"str-summary-row str-discount",children:[(0,v.jsx)("span",{children:"Length-of-stay discount"}),(0,v.jsxs)("span",{children:["-",C(t.los_discount)]})]}),(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsx)("span",{children:"Cleaning fee"}),(0,v.jsx)("span",{children:C(t?.cleaning_fee)})]}),t?.security_deposit>0&&(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsx)("span",{children:"Security deposit"}),(0,v.jsx)("span",{children:C(t.security_deposit)})]}),(0,v.jsxs)("div",{className:"str-summary-row",children:[(0,v.jsx)("span",{children:"Taxes"}),(0,v.jsx)("span",{children:C(t?.taxes)})]}),(0,v.jsxs)("div",{className:"str-summary-row str-total",children:[(0,v.jsx)("span",{children:"Total"}),(0,v.jsx)("span",{children:C(t?.total)})]})]}),(0,v.jsxs)("form",{onSubmit:function(e){e.preventDefault();const t=function(){const e={};return o.guest_name.trim()||(e.guest_name="Full name is required."),o.guest_email.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.guest_email)||(e.guest_email="A valid email address is required."),e}();Object.keys(t).length>0?c(t):r(o)},noValidate:!0,children:[(0,v.jsx)("h3",{children:"Your Details"}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"guest_name",children:"Full Name *"}),(0,v.jsx)("input",{type:"text",id:"guest_name",name:"guest_name",value:o.guest_name,onChange:u,autoComplete:"name",required:!0}),a.guest_name&&(0,v.jsx)("span",{className:"str-field-error",children:a.guest_name})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"guest_email",children:"Email Address *"}),(0,v.jsx)("input",{type:"email",id:"guest_email",name:"guest_email",value:o.guest_email,onChange:u,autoComplete:"email",required:!0}),a.guest_email&&(0,v.jsx)("span",{className:"str-field-error",children:a.guest_email})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"guest_phone",children:"Phone Number"}),(0,v.jsx)("input",{type:"tel",id:"guest_phone",name:"guest_phone",value:o.guest_phone,onChange:u,autoComplete:"tel"})]}),(0,v.jsxs)("div",{className:"str-field",children:[(0,v.jsx)("label",{htmlFor:"special_requests",children:"Special Requests"}),(0,v.jsx)("textarea",{id:"special_requests",name:"special_requests",value:o.special_requests,onChange:u,rows:3,placeholder:"Allergies, accessibility needs, late arrival, etc."})]}),(0,v.jsxs)("div",{className:"str-btn-row",children:[(0,v.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:s,children:"‚Üê Back"}),(0,v.jsx)("button",{type:"submit",className:"str-btn str-btn-primary",children:"Continue to Payment ‚Üí"})]})]})]})}const{apiUrl:_}=window.strBookingData||{};function P(e,t="usd"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase()}).format(e)}function O({propertyId:t,dates:n,pricing:r,guestDetails:s,onSuccess:o,onBack:i,onError:a}){const c=(0,f.useStripe)(),u=(0,f.useElements)(),[l,d]=(0,e.useState)(null),[p,m]=(0,e.useState)(null),[h,y]=(0,e.useState)(!1),[b,k]=(0,e.useState)(!1),[S,j]=(0,e.useState)(!1),{currency:x}=window.strBookingData||{};if((0,e.useState)(()=>{!async function(){y(!0);try{const e=await g()({url:`${_}/booking`,method:"POST",data:{property_id:t,check_in:n.checkIn,check_out:n.checkOut,guest_name:s.guest_name,guest_email:s.guest_email,guest_phone:s.guest_phone||"",guest_count:s.guest_count||1,special_requests:s.special_requests||""}});d(e.client_secret),m(e.booking_id),j(!0)}catch(e){a(e?.message||"Could not initialize payment. Please go back and try again.")}finally{y(!1)}}()}),h)return(0,v.jsx)("div",{className:"str-payment-loading",children:(0,v.jsx)("p",{children:"Preparing your booking..."})});if(!S)return null;const E={clientSecret:l,appearance:{theme:"stripe",variables:{colorPrimary:"#1a1a2e",borderRadius:"6px"}}};return(0,v.jsxs)("div",{className:"str-payment-form",children:[(0,v.jsxs)("div",{className:"str-payment-summary",children:[(0,v.jsx)("h3",{children:"Payment"}),(0,v.jsxs)("p",{className:"str-total-due",children:["Total due:"," ",(0,v.jsx)("strong",{children:P(r?.total,x)})]}),r?.security_deposit>0&&(0,v.jsxs)("p",{className:"str-deposit-note",children:["Includes ",P(r.security_deposit,x)," security deposit, refundable after check-out."]})]}),(0,v.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),!c||!u||!l)return;k(!0);const{error:t}=await c.confirmPayment({elements:u,confirmParams:{return_url:window.location.href,payment_method_data:{billing_details:{name:s.guest_name,email:s.guest_email,phone:s.guest_phone||void 0}}},redirect:"if_required"});if(t)return a(t.message),void k(!1);o({bookingId:p,total:r?.total,currency:x})},children:[l&&(0,v.jsx)(f.PaymentElement,{id:"str-payment-element",options:E}),(0,v.jsxs)("div",{className:"str-btn-row",style:{marginTop:"24px"},children:[(0,v.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:i,disabled:b,children:"‚Üê Back"}),(0,v.jsx)("button",{type:"submit",className:"str-btn str-btn-primary",disabled:!c||!u||b,children:b?"Processing...":`Pay ${P(r?.total,x)}`})]}),(0,v.jsx)("p",{className:"str-secure-notice",children:"üîí Payment secured by Stripe. Your card details are never stored on this site."})]})]})}const{currency:A}=window.strBookingData||{};function I(e){if(!e)return"";const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}function T({bookingResult:e,guestDetails:t,dates:n,pricing:r}){return(0,v.jsxs)("div",{className:"str-confirmation",children:[(0,v.jsx)("div",{className:"str-confirmation-icon",children:"‚úì"}),(0,v.jsx)("h2",{children:"Booking Confirmed!"}),(0,v.jsxs)("p",{className:"str-confirmation-sub",children:["A confirmation has been sent to ",(0,v.jsx)("strong",{children:t?.guest_email})]}),e?.bookingId&&(0,v.jsxs)("p",{className:"str-confirmation-number",children:["Booking #",e.bookingId]}),(0,v.jsxs)("div",{className:"str-confirmation-details",children:[(0,v.jsxs)("div",{className:"str-detail-row",children:[(0,v.jsx)("span",{children:"Check-in"}),(0,v.jsx)("span",{children:I(n?.checkIn)})]}),(0,v.jsxs)("div",{className:"str-detail-row",children:[(0,v.jsx)("span",{children:"Check-out"}),(0,v.jsx)("span",{children:I(n?.checkOut)})]}),(0,v.jsxs)("div",{className:"str-detail-row",children:[(0,v.jsx)("span",{children:"Nights"}),(0,v.jsx)("span",{children:r?.nights})]}),(0,v.jsxs)("div",{className:"str-detail-row str-total",children:[(0,v.jsx)("span",{children:"Total Charged"}),(0,v.jsx)("span",{children:(s=r?.total,new Intl.NumberFormat("en-US",{style:"currency",currency:(A||"usd").toUpperCase()}).format(s))})]})]}),(0,v.jsx)("p",{className:"str-confirmation-next",children:"You'll receive pre-arrival instructions 3 days before check-in, and check-in details on the morning of your arrival."})]});var s}const D={DATES:"DATES",GUEST_DETAILS:"GUEST_DETAILS",PAYMENT:"PAYMENT",CONFIRMATION:"CONFIRMATION"},R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];m=!0;var r=Date.now();return h().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),s=function(e){return 3===e?"v3":e}(e.version);r&&"v3"!==s&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat("v3",". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var o=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:t})}(o,n),o}(e,t,r)})}(window.strBookingData?.stripePublishableKey||"");function M({propertyId:t}){const[n,r]=(0,e.useState)(D.DATES),[s,o]=(0,e.useState)({checkIn:null,checkOut:null}),[i,a]=(0,e.useState)(null),[c,u]=(0,e.useState)({}),[l,d]=(0,e.useState)(null),[p,m]=(0,e.useState)(null);function h(){m(null),n===D.GUEST_DETAILS?r(D.DATES):n===D.PAYMENT&&r(D.GUEST_DETAILS)}const y={[D.DATES]:"1. Select Dates",[D.GUEST_DETAILS]:"2. Your Details",[D.PAYMENT]:"3. Payment",[D.CONFIRMATION]:"Confirmed!"};return(0,v.jsxs)("div",{className:"str-booking-widget",children:[n!==D.CONFIRMATION&&(0,v.jsx)("nav",{className:"str-steps",children:Object.values(D).map(e=>(0,v.jsx)("span",{className:`str-step ${n===e?"is-active":""} ${B(e,n)?"is-complete":""}`,children:y[e]},e))}),p&&(0,v.jsx)("div",{className:"str-error-message",role:"alert",children:p}),n===D.DATES&&(0,v.jsx)(x,{propertyId:t,onDatesSelected:function(e,t,n){o({checkIn:e,checkOut:t}),a(n),r(D.GUEST_DETAILS),m(null)},onError:m}),n===D.GUEST_DETAILS&&(0,v.jsx)(N,{pricing:i,dates:s,onSubmit:function(e){u(e),r(D.PAYMENT),m(null)},onBack:h}),n===D.PAYMENT&&(0,v.jsx)(f.Elements,{stripe:R,children:(0,v.jsx)(O,{propertyId:t,dates:s,pricing:i,guestDetails:c,onSuccess:function(e){d(e),r(D.CONFIRMATION)},onBack:h,onError:m})}),n===D.CONFIRMATION&&(0,v.jsx)(T,{bookingResult:l,guestDetails:c,dates:s,pricing:i})]})}function B(e,t){const n=Object.values(D);return n.indexOf(e)<n.indexOf(t)}document.body.classList.contains("et-fb")||window.ETBuilderBackend||document.querySelectorAll(".str-booking-widget[data-property-id]").forEach(t=>{const n=parseInt(t.dataset.propertyId,10);n&&(0,e.createRoot)(t).render((0,v.jsx)(M,{propertyId:n}))})})()})();