(()=>{var e={926(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,s,a=[],_n=!0,o=!1;try{for(n=n.call(e);!(_n=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);_n=!0);}catch(e){o=!0,s=e}finally{try{_n||null==n.return||n.return()}finally{if(o)throw s}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u,d,p,m,h={exports:{}};h.exports=function(){if(m)return p;m=1;var e=d?u:(d=1,u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,p=function(){function r(t,n,r,s,a,o){if(o!==e){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function s(){return r}r.isRequired=r;var a={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a}}()();var f=l(h.exports),y=function(e,n,r){var s=!!r,a=t.useRef(r);t.useEffect(function(){a.current=r},[r]),t.useEffect(function(){if(!s||!e)return function(){};var t=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,t),function(){e.off(n,t)}},[s,n,e,a])},g=function(e){var n=t.useRef(e);return t.useEffect(function(){n.current=e},[e]),n.current},x=function(e){return null!==e&&"object"===s(e)},v="[object Object]",b=function e(t,n){if(!x(t)||!x(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var s=Object.prototype.toString.call(t)===v;if(s!==(Object.prototype.toString.call(n)===v))return!1;if(!s&&!r)return t===n;var a=Object.keys(t),o=Object.keys(n);if(a.length!==o.length)return!1;for(var i={},c=0;c<a.length;c+=1)i[a[c]]=!0;for(var l=0;l<o.length;l+=1)i[o[l]]=!0;var u=Object.keys(i);if(u.length!==a.length)return!1;var d=t,p=n;return u.every(function(t){return e(d[t],p[t])})},j=function(e,t,n){return x(e)?Object.keys(e).reduce(function(s,o){var i=!x(t)||!b(e[o],t[o]);return n.includes(o)?(i&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),s):i?r(r({},s||{}),{},a({},o,e[o])):s},null):null},S="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",k=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;if(null===e||x(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(n)},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;if(function(e){return x(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return k(e,t)})};var n=k(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},w=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.10.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.10.0",url:"https://stripe.com/docs/stripe-js/react"}))},E=t.createContext(null);E.displayName="ElementsContext";var C=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},N=function(e){var n=e.stripe,r=e.options,s=e.children,a=t.useMemo(function(){return _(n)},[n]),o=i(t.useState(function(){return{stripe:"sync"===a.tag?a.stripe:null,elements:"sync"===a.tag?a.stripe.elements(r):null}}),2),c=o[0],l=o[1];t.useEffect(function(){var e=!0,t=function(e){l(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==a.tag||c.stripe?"sync"!==a.tag||c.stripe||t(a.stripe):a.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[a,c,r]);var u=g(n);t.useEffect(function(){null!==u&&u!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,n]);var d=g(r);return t.useEffect(function(){if(c.elements){var e=j(r,d,["clientSecret","fonts"]);e&&c.elements.update(e)}},[r,d,c.elements]),t.useEffect(function(){w(c.stripe)},[c.stripe]),t.createElement(E.Provider,{value:c},s)};N.propTypes={stripe:f.any,options:f.object};var P=function(e){var n=t.useContext(E);return C(n,e)},O=function(e){return(0,e.children)(P("mounts <ElementsConsumer>"))};O.propTypes={children:f.func.isRequired};var I=["on","session"],T=t.createContext(null);T.displayName="CheckoutSdkContext";var A=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},D=t.createContext(null);D.displayName="CheckoutContext";var B=function(e){var n=e.stripe,r=e.options,s=e.children,a=t.useMemo(function(){return _(n,"Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[n]),c=i(t.useState(null),2),l=c[0],u=c[1],d=i(t.useState(function(){return{stripe:"sync"===a.tag?a.stripe:null,checkoutSdk:null}}),2),p=d[0],m=d[1],h=function(e,t){m(function(n){return n.stripe&&n.checkoutSdk?n:{stripe:e,checkoutSdk:t}})},f=t.useRef(!1);t.useEffect(function(){var e=!0;return"async"!==a.tag||p.stripe?"sync"===a.tag&&a.stripe&&!f.current&&(f.current=!0,a.stripe.initCheckout(r).then(function(e){e&&(h(a.stripe,e),e.on("change",u))})):a.stripePromise.then(function(t){t&&e&&!f.current&&(f.current=!0,t.initCheckout(r).then(function(e){e&&(h(t,e),e.on("change",u))}))}),function(){e=!1}},[a,p,r,u]);var y=g(n);t.useEffect(function(){null!==y&&y!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[y,n]);var x=g(r),v=g(p.checkoutSdk);t.useEffect(function(){var e,t,n,s;if(p.checkoutSdk){var a=Boolean(!v&&p.checkoutSdk),o=null==x||null===(e=x.elementsOptions)||void 0===e?void 0:e.appearance,i=null==r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance,c=!b(i,o);i&&(c||a)&&p.checkoutSdk.changeAppearance(i);var l=null==x||null===(n=x.elementsOptions)||void 0===n?void 0:n.fonts,u=null==r||null===(s=r.elementsOptions)||void 0===s?void 0:s.fonts,d=!b(l,u);u&&(d||a)&&p.checkoutSdk.loadFonts(u)}},[r,x,p.checkoutSdk,v]),t.useEffect(function(){w(p.stripe)},[p.stripe]);var j=t.useMemo(function(){return function(e,t){if(!e)return null;e.on,e.session;var n=o(e,I);return t?Object.assign(t,n):Object.assign(e.session(),n)}(p.checkoutSdk,l)},[p.checkoutSdk,l]);return p.checkoutSdk?t.createElement(T.Provider,{value:p},t.createElement(D.Provider,{value:j},s)):null};B.propTypes={stripe:f.any,options:f.shape({fetchClientSecret:f.func.isRequired,elementsOptions:f.object}).isRequired};var M=function(e){var n=t.useContext(T),r=t.useContext(E);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?A(n,e):C(r,e)},L=["mode"],R=function(e,n){var r,s="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),a=n?function(e){M("mounts <".concat(s,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r,a=n.id,c=n.className,l=n.options,u=void 0===l?{}:l,d=n.onBlur,p=n.onFocus,m=n.onReady,h=n.onChange,f=n.onEscape,x=n.onClick,v=n.onLoadError,b=n.onLoaderStart,S=n.onNetworksChange,k=n.onConfirm,_=n.onCancel,w=n.onShippingAddressChange,E=n.onShippingRateChange,C=n.onSavedPaymentMethodRemove,N=n.onSavedPaymentMethodUpdate,P=M("mounts <".concat(s,">")),O="elements"in P?P.elements:null,I="checkoutSdk"in P?P.checkoutSdk:null,T=i(t.useState(null),2),A=T[0],D=T[1],B=t.useRef(null),R=t.useRef(null);y(A,"blur",d),y(A,"focus",p),y(A,"escape",f),y(A,"click",x),y(A,"loaderror",v),y(A,"loaderstart",b),y(A,"networkschange",S),y(A,"confirm",k),y(A,"cancel",_),y(A,"shippingaddresschange",w),y(A,"shippingratechange",E),y(A,"savedpaymentmethodremove",C),y(A,"savedpaymentmethodupdate",N),y(A,"change",h),m&&(r="expressCheckout"===e?m:function(){m(A)}),y(A,"ready",r),t.useLayoutEffect(function(){if(null===B.current&&null!==R.current&&(O||I)){var t=null;if(I)switch(e){case"payment":t=I.createPaymentElement(u);break;case"address":if(!("mode"in u))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=u.mode,r=o(u,L);if("shipping"===n)t=I.createShippingAddressElement(r);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=I.createBillingAddressElement(r)}break;case"expressCheckout":t=I.createExpressCheckoutElement(u);break;case"currencySelector":t=I.createCurrencySelectorElement();break;case"taxId":t=I.createTaxIdElement(u);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else O&&(t=O.create(e,u));B.current=t,D(t),t&&t.mount(R.current)}},[O,I,u]);var U=g(u);return t.useEffect(function(){if(B.current){var e=j(u,U,["paymentRequest"]);e&&"update"in B.current&&B.current.update(e)}},[u,U]),t.useLayoutEffect(function(){return function(){if(B.current&&"function"==typeof B.current.destroy)try{B.current.destroy(),B.current=null}catch(e){}}},[]),t.createElement("div",{id:a,className:c,ref:R})};return a.propTypes={id:f.string,className:f.string,onChange:f.func,onBlur:f.func,onFocus:f.func,onReady:f.func,onEscape:f.func,onClick:f.func,onLoadError:f.func,onLoaderStart:f.func,onNetworksChange:f.func,onConfirm:f.func,onCancel:f.func,onShippingAddressChange:f.func,onShippingRateChange:f.func,onSavedPaymentMethodRemove:f.func,onSavedPaymentMethodUpdate:f.func,options:f.object},a.displayName=s,a.__elementType=e,a},U="undefined"==typeof window,F=t.createContext(null);F.displayName="EmbeddedCheckoutProviderContext";var q=function(){var e=t.useContext(F);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},Y=U?function(e){var n=e.id,r=e.className;return q(),t.createElement("div",{id:n,className:r})}:function(e){var n=e.id,r=e.className,s=q().embeddedCheckout,a=t.useRef(!1),o=t.useRef(null);return t.useLayoutEffect(function(){return!a.current&&s&&null!==o.current&&(s.mount(o.current),a.current=!0),function(){if(a.current&&s)try{s.unmount(),a.current=!1}catch(e){}}},[s]),t.createElement("div",{ref:o,id:n,className:r})},$=R("auBankAccount",U),z=R("card",U),W=R("cardNumber",U),G=R("cardExpiry",U),K=R("cardCvc",U),H=R("fpxBank",U),V=R("iban",U),J=R("idealBank",U),X=R("p24Bank",U),Q=R("epsBank",U),Z=R("payment",U),ee=R("expressCheckout",U),te=R("currencySelector",U),ne=R("paymentRequestButton",U),re=R("linkAuthentication",U),se=R("address",U),ae=R("shippingAddress",U),oe=R("paymentMethodMessaging",U),ie=R("affirmMessage",U),ce=R("afterpayClearpayMessage",U),le=R("taxId",U);e.AddressElement=se,e.AffirmMessageElement=ie,e.AfterpayClearpayMessageElement=ce,e.AuBankAccountElement=$,e.CardCvcElement=K,e.CardElement=z,e.CardExpiryElement=G,e.CardNumberElement=W,e.CheckoutProvider=B,e.CurrencySelectorElement=te,e.Elements=N,e.ElementsConsumer=O,e.EmbeddedCheckout=Y,e.EmbeddedCheckoutProvider=function(e){var n=e.stripe,r=e.options,s=e.children,a=t.useMemo(function(){return _(n,"Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[n]),o=t.useRef(null),c=t.useRef(null),l=i(t.useState({embeddedCheckout:null}),2),u=l[0],d=l[1];t.useEffect(function(){if(!c.current&&!o.current){var e=function(e){c.current||o.current||(c.current=e,o.current=c.current.initEmbeddedCheckout(r).then(function(e){d({embeddedCheckout:e})}))};"async"!==a.tag||c.current||!r.clientSecret&&!r.fetchClientSecret?"sync"!==a.tag||c.current||!r.clientSecret&&!r.fetchClientSecret||e(a.stripe):a.stripePromise.then(function(t){t&&e(t)})}},[a,r,u,c]),t.useEffect(function(){return function(){u.embeddedCheckout?(o.current=null,u.embeddedCheckout.destroy()):o.current&&o.current.then(function(){o.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()})}},[u.embeddedCheckout]),t.useEffect(function(){w(c)},[c]);var p=g(n);t.useEffect(function(){null!==p&&p!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[p,n]);var m=g(r);return t.useEffect(function(){null!=m&&(null!=r?(void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=m.clientSecret&&r.clientSecret!==m.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.fetchClientSecret&&r.fetchClientSecret!==m.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.onComplete&&r.onComplete!==m.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=m.onShippingDetailsChange&&r.onShippingDetailsChange!==m.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=m.onLineItemsChange&&r.onLineItemsChange!==m.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))},[m,r]),t.createElement(F.Provider,{value:u},s)},e.EpsBankElement=Q,e.ExpressCheckoutElement=ee,e.FpxBankElement=H,e.IbanElement=V,e.IdealBankElement=J,e.LinkAuthenticationElement=re,e.P24BankElement=X,e.PaymentElement=Z,e.PaymentMethodMessagingElement=oe,e.PaymentRequestButtonElement=ne,e.ShippingAddressElement=ae,e.TaxIdElement=le,e.useCheckout=function(){!function(e){var n=t.useContext(T);A(n,e)}("calls useCheckout()");var e=t.useContext(D);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},e.useElements=function(){return P("calls useElements()").elements},e.useStripe=function(){return M("calls useStripe()").stripe}}(t,n(609))},609(e){"use strict";e.exports=window.React}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.apiFetch;var r=n.n(t);const s=window.ReactJSXRuntime,{apiUrl:a,nonce:o}=window.strBookingData||{},i=window.strBookingProperty||{};function c(e){const[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r)}function l(e){if(!e)return"";const t=e instanceof Date?e:new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function u({propertyId:t,onDatesSelected:n,onError:o}){const[u,d]=(0,e.useState)(""),[p,m]=(0,e.useState)(""),[h,f]=(0,e.useState)(1),[y,g]=(0,e.useState)(!1),[x,v]=(0,e.useState)(!1),[b,j]=(0,e.useState)([]),[S,k]=(0,e.useState)(null),_=i.minNights||1,w=i.maxGuests||16;(0,e.useEffect)(()=>{!async function(){try{const e=new Date,n=await r()({url:`${a}/calendar/${t}?year=${e.getFullYear()}&month=${e.getMonth()+1}`,method:"GET"});Array.isArray(n)&&j(n.filter(e=>"available"!==e.status).map(e=>e.date))}catch(e){}}()},[t]);const E=(0,e.useCallback)(async()=>{if(u&&p){g(!0),k(null);try{const e=await r()({url:`${a}/availability`,method:"POST",data:{property_id:t,check_in:u,check_out:p}});k(e.available)}catch(e){o("Could not check availability. Please try again.")}finally{g(!1)}}},[u,p,t,o]);(0,e.useEffect)(()=>{u&&p&&E()},[u,p,E]);const C=l(new Date),N=u?l(function(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}(c(u),_)):C,P=u&&p?Math.round((c(p)-c(u))/864e5):0;return(0,s.jsxs)("div",{className:"str-date-picker",children:[(0,s.jsx)("h3",{children:"Select Your Dates"}),(0,s.jsxs)("div",{className:"str-field-group",children:[(0,s.jsxs)("div",{className:"str-field",children:[(0,s.jsx)("label",{htmlFor:"str-checkin",children:"Check-in Date"}),(0,s.jsx)("input",{type:"date",id:"str-checkin",value:u,min:C,onChange:e=>{d(e.target.value),m(""),k(null)}})]}),(0,s.jsxs)("div",{className:"str-field",children:[(0,s.jsx)("label",{htmlFor:"str-checkout",children:"Check-out Date"}),(0,s.jsx)("input",{type:"date",id:"str-checkout",value:p,min:N,disabled:!u,onChange:e=>{m(e.target.value),k(null)}})]}),(0,s.jsxs)("div",{className:"str-field",children:[(0,s.jsx)("label",{htmlFor:"str-guests",children:"Guests"}),(0,s.jsx)("select",{id:"str-guests",value:h,onChange:e=>f(parseInt(e.target.value,10)),children:Array.from({length:w},(e,t)=>t+1).map(e=>(0,s.jsxs)("option",{value:e,children:[e," ",1===e?"guest":"guests"]},e))})]})]}),_>1&&(0,s.jsxs)("p",{className:"str-min-nights-note",children:["Minimum stay: ",_," nights"]}),y&&(0,s.jsx)("p",{className:"str-status",children:"Checking availability..."}),!y&&!0===S&&P>0&&(0,s.jsx)("div",{className:"str-availability-ok",children:(0,s.jsxs)("p",{children:["‚úì Available for ",P," ",1===P?"night":"nights"]})}),!y&&!1===S&&(0,s.jsx)("div",{className:"str-availability-unavailable",children:(0,s.jsx)("p",{children:"‚úó Sorry, those dates are not available. Please select different dates."})}),(0,s.jsx)("button",{className:"str-btn str-btn-primary",disabled:!S||x,onClick:async function(){if(u&&p&&S)if(P<_)o(`Minimum stay is ${_} ${1===_?"night":"nights"}. Please select a check-out date at least ${_} ${1===_?"night":"nights"} after check-in.`);else{v(!0);try{const e=await r()({url:`${a}/pricing`,method:"POST",data:{property_id:t,check_in:u,check_out:p,guests:h}});n(u,p,e)}catch(e){o("Could not calculate pricing. Please try again.")}finally{v(!1)}}},children:x?"Calculating...":"Continue ‚Üí"})]})}o&&r().use(r().createNonceMiddleware(o));const{currency:d}=window.strBookingData||{};function p(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:(d||"usd").toUpperCase()}).format(e)}function m(e){if(!e)return"";const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}function h({pricing:t,dates:n,onSubmit:r,onBack:a}){const[o,i]=(0,e.useState)({guest_name:"",guest_email:"",guest_phone:"",special_requests:""}),[c,l]=(0,e.useState)({});function u(e){const{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),l(e=>({...e,[t]:""}))}return(0,s.jsxs)("div",{className:"str-guest-form",children:[(0,s.jsxs)("div",{className:"str-pricing-summary",children:[(0,s.jsx)("h3",{children:"Booking Summary"}),(0,s.jsxs)("div",{className:"str-summary-row",children:[(0,s.jsx)("span",{children:"Dates"}),(0,s.jsxs)("span",{children:[m(n.checkIn)," ‚Üí ",m(n.checkOut)]})]}),(0,s.jsxs)("div",{className:"str-summary-row",children:[(0,s.jsxs)("span",{children:[p(t?.nightly_rate)," √ó ",t?.nights," ",1===t?.nights?"night":"nights"]}),(0,s.jsx)("span",{children:p(t?.nightly_subtotal)})]}),t?.los_discount>0&&(0,s.jsxs)("div",{className:"str-summary-row str-discount",children:[(0,s.jsx)("span",{children:"Length-of-stay discount"}),(0,s.jsxs)("span",{children:["-",p(t.los_discount)]})]}),(0,s.jsxs)("div",{className:"str-summary-row",children:[(0,s.jsx)("span",{children:"Cleaning fee"}),(0,s.jsx)("span",{children:p(t?.cleaning_fee)})]}),t?.security_deposit>0&&(0,s.jsxs)("div",{className:"str-summary-row",children:[(0,s.jsx)("span",{children:"Security deposit"}),(0,s.jsx)("span",{children:p(t.security_deposit)})]}),(0,s.jsxs)("div",{className:"str-summary-row",children:[(0,s.jsx)("span",{children:"Taxes"}),(0,s.jsx)("span",{children:p(t?.taxes)})]}),(0,s.jsxs)("div",{className:"str-summary-row str-total",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsx)("span",{children:p(t?.total)})]})]}),(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault();const t=function(){const e={};return o.guest_name.trim()||(e.guest_name="Full name is required."),o.guest_email.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.guest_email)||(e.guest_email="A valid email address is required."),e}();Object.keys(t).length>0?l(t):r(o)},noValidate:!0,children:[(0,s.jsx)("h3",{children:"Your Details"}),(0,s.jsxs)("div",{className:"str-field",children:[(0,s.jsx)("label",{htmlFor:"guest_name",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",id:"guest_name",name:"guest_name",value:o.guest_name,onChange:u,autoComplete:"name",required:!0}),c.guest_name&&(0,s.jsx)("span",{className:"str-field-error",children:c.guest_name})]}),(0,s.jsxs)("div",{className:"str-field",children:[(0,s.jsx)("label",{htmlFor:"guest_email",children:"Email Address *"}),(0,s.jsx)("input",{type:"email",id:"guest_email",name:"guest_email",value:o.guest_email,onChange:u,autoComplete:"email",required:!0}),c.guest_email&&(0,s.jsx)("span",{className:"str-field-error",children:c.guest_email})]}),(0,s.jsxs)("div",{className:"str-field",children:[(0,s.jsx)("label",{htmlFor:"guest_phone",children:"Phone Number"}),(0,s.jsx)("input",{type:"tel",id:"guest_phone",name:"guest_phone",value:o.guest_phone,onChange:u,autoComplete:"tel"})]}),(0,s.jsxs)("div",{className:"str-field",children:[(0,s.jsx)("label",{htmlFor:"special_requests",children:"Special Requests"}),(0,s.jsx)("textarea",{id:"special_requests",name:"special_requests",value:o.special_requests,onChange:u,rows:3,placeholder:"Allergies, accessibility needs, late arrival, etc."})]}),(0,s.jsxs)("div",{className:"str-btn-row",children:[(0,s.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:a,children:"‚Üê Back"}),(0,s.jsx)("button",{type:"submit",className:"str-btn str-btn-primary",children:"Continue to Payment ‚Üí"})]})]})]})}const{currency:f}=window.strBookingData||{};function y(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:(f||"usd").toUpperCase()}).format(e)}function g(e){if(!e)return"";const[t,n,r]=e.split("-");return new Date(Number(t),Number(n)-1,Number(r)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function x(e,t){const[n,r,s]=e.split("-").map(Number),a=new Date(n,r-1+t,s);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}function v({propertyId:t,pricing:n,checkin:r,eligiblePlans:a,planConfig:o,onSelect:i,onBack:c}){const l=n?.total||0,u=o?.two_deposit_pct||50,d=o?.two_days_before||42,p=o?.four_deposit_min_pct||25,m=Math.round(l*u/100*100)/100,h=Math.round(100*(l-m))/100,f=function(e,t){const[n,r,s]=e.split("-").map(Number),a=new Date(n,r-1,s-t);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}(r,d),v=Math.round(l*p/100*100)/100,[S,k]=(0,e.useState)(a.includes("pay_in_full")?"pay_in_full":a[0]||"pay_in_full"),[_,w]=(0,e.useState)(v),E=(0,e.useMemo)(()=>{const e=Math.max(_,v),t=Math.round(100*(l-e))/100,n=Math.round(t/3*100)/100,s=Math.round(100*(t-2*n))/100;return[{number:2,amount:n,due_date:x(r,-3)},{number:3,amount:n,due_date:x(r,-2)},{number:4,amount:s,due_date:x(r,-1)}]},[_,l,r,v]);return(0,s.jsxs)("div",{className:"str-plan-selector",children:[(0,s.jsx)("h3",{children:"Choose Your Payment Plan"}),(0,s.jsxs)("p",{style:{color:"#666",marginTop:0},children:["Total booking cost: ",(0,s.jsx)("strong",{children:y(l)})]}),(0,s.jsxs)("div",{className:"str-plan-options",children:[a.includes("pay_in_full")&&(0,s.jsxs)("label",{className:"str-plan-option "+("pay_in_full"===S?"is-selected":""),style:b("pay_in_full"===S),children:[(0,s.jsx)("input",{type:"radio",name:"payment_plan",value:"pay_in_full",checked:"pay_in_full"===S,onChange:()=>k("pay_in_full"),style:{marginRight:"10px"}}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Pay in Full"}),(0,s.jsxs)("span",{style:{display:"block",color:"#444",fontSize:"13px",marginTop:"2px"},children:[y(l)," due today"]})]})]}),a.includes("two_payment")&&(0,s.jsxs)("label",{className:"str-plan-option "+("two_payment"===S?"is-selected":""),style:b("two_payment"===S),children:[(0,s.jsx)("input",{type:"radio",name:"payment_plan",value:"two_payment",checked:"two_payment"===S,onChange:()=>k("two_payment"),style:{marginRight:"10px"}}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"2 Payments"}),(0,s.jsxs)("span",{style:{display:"block",color:"#444",fontSize:"13px",marginTop:"2px"},children:[y(m)," today,"," ","then ",y(h)," on ",g(f)]})]})]}),a.includes("four_payment")&&(0,s.jsxs)("label",{className:"str-plan-option "+("four_payment"===S?"is-selected":""),style:b("four_payment"===S),children:[(0,s.jsx)("input",{type:"radio",name:"payment_plan",value:"four_payment",checked:"four_payment"===S,onChange:()=>k("four_payment"),style:{marginRight:"10px"}}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"4 Payments"}),(0,s.jsx)("span",{style:{display:"block",color:"#444",fontSize:"13px",marginTop:"2px"},children:"Choose deposit + 3 equal installments"})]})]})]}),"four_payment"===S&&(0,s.jsxs)("div",{className:"str-four-payment-config",style:{marginTop:"20px",padding:"16px",background:"#f7f7f7",borderRadius:"6px"},children:[(0,s.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:["Initial deposit amount (minimum ",y(v),")"]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,s.jsx)("span",{children:"$"}),(0,s.jsx)("input",{type:"number",min:v,max:l,step:"0.01",value:_,onChange:e=>{const t=parseFloat(e.target.value)||v;w(Math.min(Math.max(t,v),l))},style:{width:"120px",padding:"6px 8px",border:"1px solid #ccc",borderRadius:"4px"}})]}),(0,s.jsxs)("div",{style:{marginTop:"16px"},children:[(0,s.jsx)("p",{style:{margin:"0 0 8px",fontWeight:600,fontSize:"13px"},children:"Payment schedule:"}),(0,s.jsxs)("div",{style:{display:"grid",gap:"6px"},children:[(0,s.jsxs)("div",{style:j,children:[(0,s.jsx)("span",{children:"Payment 1 (today)"}),(0,s.jsx)("strong",{children:y(Math.max(_,v))})]}),E.map(e=>(0,s.jsxs)("div",{style:j,children:[(0,s.jsxs)("span",{children:["Payment ",e.number," ‚Äî ",g(e.due_date)]}),(0,s.jsx)("strong",{children:y(e.amount)})]},e.number))]})]})]}),"two_payment"===S&&(0,s.jsxs)("div",{className:"str-two-payment-summary",style:{marginTop:"16px",padding:"14px",background:"#f7f7f7",borderRadius:"6px"},children:[(0,s.jsx)("p",{style:{margin:"0 0 8px",fontWeight:600,fontSize:"13px"},children:"Payment schedule:"}),(0,s.jsxs)("div",{style:{display:"grid",gap:"6px"},children:[(0,s.jsxs)("div",{style:j,children:[(0,s.jsx)("span",{children:"Payment 1 (today)"}),(0,s.jsx)("strong",{children:y(m)})]}),(0,s.jsxs)("div",{style:j,children:[(0,s.jsxs)("span",{children:["Payment 2 ‚Äî ",g(f)]}),(0,s.jsx)("strong",{children:y(h)})]})]})]}),(0,s.jsxs)("div",{className:"str-btn-row",style:{marginTop:"24px"},children:[(0,s.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:c,children:"‚Üê Back"}),(0,s.jsx)("button",{type:"button",className:"str-btn str-btn-primary",onClick:function(){let e=l,t=null;if("two_payment"===S)e=m,t=[{number:1,amount:m,due_date:"today",status:"pending"},{number:2,amount:h,due_date:f,status:"pending"}];else if("four_payment"===S){const n=Math.max(_,v);e=n,t=[{number:1,amount:n,due_date:"today",status:"pending"},...E]}i({plan:S,depositAmount:e,schedule:t})},children:"Continue to Payment ‚Üí"})]})]})}function b(e){return{display:"flex",alignItems:"flex-start",padding:"14px 16px",marginBottom:"10px",border:"2px solid "+(e?"#1a1a2e":"#ddd"),borderRadius:"6px",cursor:"pointer",background:e?"#f0f0f8":"#fff",transition:"border-color 0.15s, background 0.15s"}}const j={display:"flex",justifyContent:"space-between",fontSize:"13px",padding:"4px 0",borderBottom:"1px solid #eee"};var S,k=n(926),_="https://js.stripe.com",w="".concat(_,"/v3"),E=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,C=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,N="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",P=function(e){return E.test(e)||C.test(e)},O=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(w).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},I=null,T=null,A=null,D=!1,B=function(){return S||(S=(e=null,null!==I?I:(I=new Promise(function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(N),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(_,'"]')),t=0;t<e.length;t++){var n=e[t];if(P(n.src))return n}return null}();if(r&&e)console.warn(N);else if(r){if(r&&null!==A&&null!==T){var s;r.removeEventListener("load",A),r.removeEventListener("error",T),null===(s=r.parentNode)||void 0===s||s.removeChild(r),r=O(e)}}else r=O(e);A=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),T=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",A),r.addEventListener("error",T)}catch(e){return void n(e)}else t(null)})).catch(function(e){return I=null,Promise.reject(e)})).catch(function(e){return S=null,Promise.reject(e)}));var e};Promise.resolve().then(function(){return B()}).catch(function(e){D||console.warn(e)});const{apiUrl:M}=window.strBookingData||{},L=window.strBookingData?.stripePublishableKey?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];D=!0;var r=Date.now();return B().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),s=function(e){return 3===e?"v3":e}(e.version);r&&"v3"!==s&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat("v3",". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:t})}(a,n),a}(e,t,r)})}(window.strBookingData.stripePublishableKey):null;function R(e,t="usd"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase()}).format(e)}function U(e){if(!e||"today"===e)return"today";const[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}const F={pay_in_full:"Pay in Full",two_payment:"2-Payment Plan",four_payment:"4-Payment Plan"};function q({propertyId:t,dates:n,pricing:a,guestDetails:o,paymentPlan:i,onSuccess:c,onBack:l,onError:u}){const[d,p]=(0,e.useState)(!0),[m,h]=(0,e.useState)(!1),f=(0,e.useRef)(null),y=(0,e.useRef)(null),{currency:g,squareAppId:x,squareLocationId:v}=window.strBookingData||{};return(0,e.useEffect)(()=>{let e=!0;return async function(){if(!window.Square)return u("Square payment SDK failed to load. Please refresh and try again."),void p(!1);try{const t=window.Square.payments(x,v),n=await t.card();y.current=n,e&&f.current&&await n.attach(f.current)}catch(t){e&&u(t?.message||"Could not initialize Square payment form.")}finally{e&&p(!1)}}(),()=>{e=!1}},[]),(0,s.jsxs)("div",{className:"str-payment-form",children:[(0,s.jsxs)("div",{className:"str-payment-summary",children:[(0,s.jsx)("h3",{children:"Payment"}),(0,s.jsxs)("p",{className:"str-total-due",children:["Total due today:"," ",(0,s.jsx)("strong",{children:R(a?.total,g)})]}),a?.security_deposit>0&&(0,s.jsxs)("p",{className:"str-deposit-note",children:["Includes ",R(a.security_deposit,g)," security deposit, refundable after check-out."]})]}),(0,s.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),y.current&&!m){h(!0);try{const e=await y.current.tokenize();if("OK"!==e.status){const t=e.errors?.map(e=>e.message).join(" ")||"Card tokenization failed.";return u(t),void h(!1)}const s=await r()({url:`${M}/booking`,method:"POST",data:{property_id:t,check_in:n.checkIn,check_out:n.checkOut,guest_name:o.guest_name,guest_email:o.guest_email,guest_phone:o.guest_phone||"",guest_count:o.guest_count||1,special_requests:o.special_requests||"",source_id:e.token}});c({bookingId:s.booking_id,total:a?.total,currency:g,plan:"pay_in_full"})}catch(e){u(e?.message||"Payment failed. Please try again."),h(!1)}}},children:[d&&(0,s.jsx)("div",{className:"str-payment-loading",children:(0,s.jsx)("p",{children:"Loading payment form..."})}),(0,s.jsx)("div",{id:"str-square-card",ref:f,style:{minHeight:d?0:void 0}}),(0,s.jsxs)("div",{className:"str-btn-row",style:{marginTop:"24px"},children:[(0,s.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:l,disabled:m,children:"‚Üê Back"}),(0,s.jsx)("button",{type:"submit",className:"str-btn str-btn-primary",disabled:d||m,children:m?"Processing...":`Pay ${R(a?.total,g)}`})]}),(0,s.jsx)("p",{className:"str-secure-notice",children:"üîí Payment secured by Square. Your card details are never stored on this site."})]})]})}function Y({pricing:t,guestDetails:n,bookingId:r,depositAmount:a,plan:o,currency:i,installmentSchedule:c,onSuccess:l,onBack:u,onError:d}){const p=(0,k.useStripe)(),m=(0,k.useElements)(),[h,f]=(0,e.useState)(!1),[y,g]=(0,e.useState)(!1);if(y&&c)return(0,s.jsx)(W,{schedule:c,plan:o,currency:i});const x="pay_in_full"!==o?a:t?.total;return(0,s.jsxs)("div",{className:"str-payment-form",children:[(0,s.jsxs)("div",{className:"str-payment-summary",children:[(0,s.jsx)("h3",{children:"Payment"}),"pay_in_full"===o?(0,s.jsxs)("p",{className:"str-total-due",children:["Total due today:"," ",(0,s.jsx)("strong",{children:R(t?.total,i)})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"str-total-due",children:[F[o]," ‚Äî Due today:"," ",(0,s.jsx)("strong",{children:R(a,i)})]}),(0,s.jsxs)("p",{style:{color:"#666",fontSize:"13px",margin:"4px 0 0"},children:["Booking total: ",R(t?.total,i)," ","¬∑ Remaining"," ",R((t?.total||0)-a,i)," ","charged automatically per your plan"]})]}),t?.security_deposit>0&&(0,s.jsxs)("p",{className:"str-deposit-note",children:["Includes ",R(t.security_deposit,i)," security deposit, refundable after check-out."]})]}),(0,s.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),!p||!m)return;f(!0);const{error:s}=await p.confirmPayment({elements:m,confirmParams:{return_url:window.location.href,payment_method_data:{billing_details:{name:n.guest_name,email:n.guest_email,phone:n.guest_phone||void 0}}},redirect:"if_required"});if(s)return d(s.message),void f(!1);g(!0),f(!1),l({bookingId:r,total:t?.total,currency:i,plan:o,depositAmount:a,installmentSchedule:c})},children:[(0,s.jsx)(k.PaymentElement,{id:"str-payment-element"}),(0,s.jsxs)("div",{className:"str-btn-row",style:{marginTop:"24px"},children:[(0,s.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:u,disabled:h,children:"‚Üê Back"}),(0,s.jsx)("button",{type:"submit",className:"str-btn str-btn-primary",disabled:!p||!m||h,children:h?"Processing...":`Pay ${R(x,i)}`})]}),(0,s.jsx)("p",{className:"str-secure-notice",children:"üîí Payment secured by Stripe. Your card details are never stored on this site."})]})]})}function $({propertyId:t,dates:n,pricing:a,guestDetails:o,paymentPlan:i,onSuccess:c,onBack:l,onError:u}){const[d,p]=(0,e.useState)(null),[m,h]=(0,e.useState)(null),[f,y]=(0,e.useState)(null),[g,x]=(0,e.useState)(!0),{currency:v}=window.strBookingData||{},b=i?.plan||"pay_in_full",j=i?.depositAmount||a?.total||0;return(0,e.useEffect)(()=>{!async function(){try{const e={property_id:t,check_in:n.checkIn,check_out:n.checkOut,guest_name:o.guest_name,guest_email:o.guest_email,guest_phone:o.guest_phone||"",guest_count:o.guest_count||1,special_requests:o.special_requests||"",payment_plan:b};"four_payment"===b&&(e.deposit_amount=j);const s=await r()({url:`${M}/booking`,method:"POST",data:e});p(s.client_secret),h(s.booking_id),s.installment_schedule&&y(s.installment_schedule)}catch(e){u(e?.message||"Could not initialize payment. Please go back and try again.")}finally{x(!1)}}()},[]),g?(0,s.jsx)("div",{className:"str-payment-loading",children:(0,s.jsx)("p",{children:"Preparing your booking..."})}):d?(0,s.jsx)(k.Elements,{stripe:L,options:{clientSecret:d,appearance:{theme:"stripe",variables:{colorPrimary:"#1a1a2e",borderRadius:"6px"}}},children:(0,s.jsx)(Y,{pricing:a,guestDetails:o,bookingId:m,depositAmount:j,plan:b,currency:v,installmentSchedule:f,onSuccess:c,onBack:l,onError:u})}):(0,s.jsx)("div",{className:"str-btn-row",children:(0,s.jsx)("button",{type:"button",className:"str-btn str-btn-secondary",onClick:l,children:"‚Üê Back"})})}function z(e){const{activeGateway:t}=window.strBookingData||{};return"square"===t?(0,s.jsx)(q,{...e}):(0,s.jsx)($,{...e})}function W({schedule:e,plan:t,currency:n}){return e&&e.length?(0,s.jsxs)("div",{className:"str-installment-summary",style:{padding:"16px",background:"#f7f7f7",borderRadius:"6px"},children:[(0,s.jsxs)("h4",{style:{marginTop:0},children:[F[t]," ‚Äî Your Payment Schedule"]}),(0,s.jsx)("div",{style:{display:"grid",gap:"6px"},children:e.map(e=>(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",padding:"6px 0",borderBottom:"1px solid #eee"},children:[(0,s.jsxs)("span",{children:["Payment ",e.number," ","today"===e.due_date||e.due_date===(new Date).toISOString().slice(0,10)?"(today)":`‚Äî ${U(e.due_date)}`]}),(0,s.jsx)("strong",{children:R(e.amount,n)})]},e.number))}),(0,s.jsx)("p",{style:{fontSize:"12px",color:"#666",marginBottom:0},children:"Future payments will be automatically charged to your card on file."})]}):null}const{currency:G}=window.strBookingData||{};function K(e){if(!e)return"";const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}function H({bookingResult:e,guestDetails:t,dates:n,pricing:r}){return(0,s.jsxs)("div",{className:"str-confirmation",children:[(0,s.jsx)("div",{className:"str-confirmation-icon",children:"‚úì"}),(0,s.jsx)("h2",{children:"Booking Confirmed!"}),(0,s.jsxs)("p",{className:"str-confirmation-sub",children:["A confirmation has been sent to ",(0,s.jsx)("strong",{children:t?.guest_email})]}),e?.bookingId&&(0,s.jsxs)("p",{className:"str-confirmation-number",children:["Booking #",e.bookingId]}),(0,s.jsxs)("div",{className:"str-confirmation-details",children:[(0,s.jsxs)("div",{className:"str-detail-row",children:[(0,s.jsx)("span",{children:"Check-in"}),(0,s.jsx)("span",{children:K(n?.checkIn)})]}),(0,s.jsxs)("div",{className:"str-detail-row",children:[(0,s.jsx)("span",{children:"Check-out"}),(0,s.jsx)("span",{children:K(n?.checkOut)})]}),(0,s.jsxs)("div",{className:"str-detail-row",children:[(0,s.jsx)("span",{children:"Nights"}),(0,s.jsx)("span",{children:r?.nights})]}),(0,s.jsxs)("div",{className:"str-detail-row str-total",children:[(0,s.jsx)("span",{children:"Total Charged"}),(0,s.jsx)("span",{children:(a=r?.total,new Intl.NumberFormat("en-US",{style:"currency",currency:(G||"usd").toUpperCase()}).format(a))})]})]}),(0,s.jsx)("p",{className:"str-confirmation-next",children:"You'll receive pre-arrival instructions 3 days before check-in, and check-in details on the morning of your arrival."})]});var a}const V={DATES:"DATES",GUEST_DETAILS:"GUEST_DETAILS",PLAN_SELECTION:"PLAN_SELECTION",PAYMENT:"PAYMENT",CONFIRMATION:"CONFIRMATION"},{activeGateway:J}=window.strBookingData||{};function X({propertyId:t}){const[n,r]=(0,e.useState)(V.DATES),[a,o]=(0,e.useState)({checkIn:null,checkOut:null}),[i,c]=(0,e.useState)(null),[l,d]=(0,e.useState)({}),[p,m]=(0,e.useState)(null),[f,y]=(0,e.useState)(null),[g,x]=(0,e.useState)(null),b=window.strBookingProperty?.planConfig||{},j=function(e){if("square"===J)return["pay_in_full"];const t=[];if(!1!==b.full_enabled&&t.push("pay_in_full"),!e)return t;const n=new Date(e+"T00:00:00").getTime(),r=Date.now(),s=Math.floor((n-r)/864e5);return b.two_enabled&&s>(b.two_days_before||42)&&t.push("two_payment"),b.four_enabled&&s>90&&t.push("four_payment"),t}(a.checkIn),S=j.length>1;function k(){x(null),n===V.GUEST_DETAILS?r(V.DATES):n===V.PLAN_SELECTION?r(V.GUEST_DETAILS):n===V.PAYMENT&&r(S?V.PLAN_SELECTION:V.GUEST_DETAILS)}const _={[V.DATES]:"1. Select Dates",[V.GUEST_DETAILS]:"2. Your Details",[V.PLAN_SELECTION]:"3. Payment Plan",[V.PAYMENT]:S?"4. Payment":"3. Payment",[V.CONFIRMATION]:"Confirmed!"},w=S?Object.values(V):Object.values(V).filter(e=>e!==V.PLAN_SELECTION);return(0,s.jsxs)("div",{className:"str-booking-widget",children:[n!==V.CONFIRMATION&&(0,s.jsx)("nav",{className:"str-steps",children:w.map(e=>(0,s.jsx)("span",{className:`str-step ${n===e?"is-active":""} ${Q(e,n,w)?"is-complete":""}`,children:_[e]},e))}),g&&(0,s.jsx)("div",{className:"str-error-message",role:"alert",children:g}),n===V.DATES&&(0,s.jsx)(u,{propertyId:t,onDatesSelected:function(e,t,n){o({checkIn:e,checkOut:t}),c(n),r(V.GUEST_DETAILS),x(null)},onError:x}),n===V.GUEST_DETAILS&&(0,s.jsx)(h,{pricing:i,dates:a,onSubmit:function(e){d(e),x(null),S?r(V.PLAN_SELECTION):(m({plan:"pay_in_full",depositAmount:i?.total,schedule:null}),r(V.PAYMENT))},onBack:k}),n===V.PLAN_SELECTION&&(0,s.jsx)(v,{propertyId:t,pricing:i,checkin:a.checkIn,eligiblePlans:j,planConfig:b,onSelect:function(e){m(e),r(V.PAYMENT),x(null)},onBack:k}),n===V.PAYMENT&&(0,s.jsx)(z,{propertyId:t,dates:a,pricing:i,guestDetails:l,paymentPlan:p,onSuccess:function(e){y(e),r(V.CONFIRMATION)},onBack:k,onError:x}),n===V.CONFIRMATION&&(0,s.jsx)(H,{bookingResult:f,guestDetails:l,dates:a,pricing:i})]})}function Q(e,t,n){return n.indexOf(e)<n.indexOf(t)}document.body.classList.contains("et-fb")||window.ETBuilderBackend||document.querySelectorAll(".str-booking-widget[data-property-id]").forEach(t=>{const n=parseInt(t.dataset.propertyId,10);n&&(0,e.createRoot)(t).render((0,s.jsx)(X,{propertyId:n}))})})()})();