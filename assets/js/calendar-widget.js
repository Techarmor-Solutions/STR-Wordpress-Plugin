(()=>{"use strict";var a={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},d:(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o:(a,e)=>Object.prototype.hasOwnProperty.call(a,e)};const e=window.wp.element,t=window.wp.apiFetch;var s=a.n(t);const l=window.ReactJSXRuntime,{apiUrl:r,nonce:n}=window.strBookingData||{};function c({propertyId:a}){const t=new Date,[n,c]=(0,e.useState)(t.getFullYear()),[i,d]=(0,e.useState)(t.getMonth()+1),[o,m]=(0,e.useState)([]),[u,h]=(0,e.useState)(!1);(0,e.useEffect)(()=>{!async function(){h(!0);try{const e=await s()({url:`${r}/admin/availability/${a}?year=${n}&month=${i}`,method:"GET"});m(Array.isArray(e)?e:[])}catch(a){}finally{h(!1)}}()},[n,i]);const p={};o.forEach(a=>{p[a.date]=a.status});const y=new Date(n,i-1,1).getDay(),g=new Date(n,i,0).getDate(),v=new Date(n,i-1).toLocaleString("default",{month:"long",year:"numeric"}),j=n===t.getFullYear()&&i===t.getMonth()+1;return(0,l.jsxs)("div",{className:"str-availability-cal",children:[(0,l.jsxs)("div",{className:"str-cal-nav",children:[(0,l.jsx)("button",{onClick:function(){n===t.getFullYear()&&i===t.getMonth()+1||(1===i?(d(12),c(n-1)):d(i-1))},disabled:j,"aria-label":"Previous month",children:"‹"}),(0,l.jsx)("span",{className:"str-cal-month-label",children:v}),(0,l.jsx)("button",{onClick:function(){12===i?(d(1),c(n+1)):d(i+1)},"aria-label":"Next month",children:"›"})]}),u?(0,l.jsx)("div",{className:"str-cal-loading",children:"Loading..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"str-cal-weekdays",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(a=>(0,l.jsx)("div",{className:"str-cal-weekday",children:a},a))}),(0,l.jsxs)("div",{className:"str-cal-days",children:[Array.from({length:y}).map((a,e)=>(0,l.jsx)("div",{className:"str-cal-day str-cal-empty"},`e-${e}`)),Array.from({length:g},(a,e)=>e+1).map(a=>{const e=`${n}-${String(i).padStart(2,"0")}-${String(a).padStart(2,"0")}`,s=p[e]||"available",r=new Date(e)<t;return(0,l.jsx)("div",{className:["str-cal-day",`str-cal-${s}`,r?"str-cal-past":""].join(" "),"aria-label":`${e}: ${s}`,children:a},a)})]}),(0,l.jsxs)("div",{className:"str-cal-legend",children:[(0,l.jsxs)("span",{className:"str-legend-item",children:[(0,l.jsx)("span",{className:"str-legend-dot str-cal-available"}),"Available"]}),(0,l.jsxs)("span",{className:"str-legend-item",children:[(0,l.jsx)("span",{className:"str-legend-dot str-cal-booked"}),"Unavailable"]})]})]})]})}n&&s().use(s().createNonceMiddleware(n)),document.querySelectorAll(".str-availability-calendar").forEach(a=>{const t=parseInt(a.dataset.propertyId,10);t&&(0,e.render)((0,l.jsx)(c,{propertyId:t}),a)})})();